{"uuid":"1dd7ed0c-37c1-11ee-a8cf-9f1e20c0b39f","page":{"id":202612450,"data":{"appState":"[\"~#iR\",[\"^ \",\"n\",\"appTemplate\",\"v\",[\"^ \",\"appMaxWidth\",\"1560px\",\"appStyles\",\"\",\"appTesting\",null,\"appThemeId\",null,\"appThemeModeId\",null,\"appThemeName\",null,\"createdAt\",null,\"customComponentCollections\",[],\"customDocumentTitle\",\"\",\"customDocumentTitleEnabled\",false,\"customShortcuts\",[],\"experimentalFeatures\",[\"^ \",\"sourceControlTemplateDehydration\",false],\"folders\",[\"~#iL\",[]],\"formAppSettings\",[\"^ \",\"customRedirectUrl\",\"\"],\"inAppRetoolPillAppearance\",\"NO_OVERRIDE\",\"instrumentationEnabled\",false,\"internationalizationSettings\",[\"^ \",\"internationalizationEnabled\",false,\"internationalizationFiles\",[]],\"isFetching\",false,\"isFormApp\",false,\"isGlobalWidget\",false,\"isMobileApp\",false,\"loadingIndicatorsDisabled\",false,\"markdownLinkBehavior\",\"auto\",\"mobileAppSettings\",[\"^ \",\"mobileOfflineModeEnabled\",false,\"mobileOfflineModeDelaySync\",false,\"mobileOfflineModeBannerMode\",\"default\",\"displaySetting\",[\"^ \",\"landscapeMode\",false,\"tabletMode\",false]],\"mobileOfflineAssets\",[],\"multiScreenMobileApp\",false,\"notificationsSettings\",[\"^ \",\"globalQueryShowFailureToast\",true,\"globalQueryShowSuccessToast\",false,\"globalQueryToastDuration\",4.5,\"globalToastPosition\",\"bottomRight\"],\"pageCodeFolders\",[\"^ \"],\"pageLoadValueOverrides\",[\"^?\",[]],\"persistUrlParams\",false,\"plugins\",[\"~#iOM\",[\"searchOperator\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"searchOperator\",\"uuid\",null,\"_comment\",null,\"type\",\"datasource\",\"subtype\",\"SqlQueryUnified\",\"namespace\",null,\"resourceName\",\"7744c302-1341-493f-9fa4-71b6dd5c5923\",\"resourceDisplayName\",\"Production (read only)\",\"template\",[\"^13\",[\"queryRefreshTime\",\"\",\"streamResponse\",false,\"records\",\"\",\"lastReceivedFromResourceAt\",null,\"databasePasswordOverride\",\"\",\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"workflowRunId\",null,\"showFailureToaster\",true,\"query\",\"select * from operator\\njoin subscription_log using(operator_id)\\nwhere operator_id = {{textInput2.value}}\\n  and subscription_log.removed_at is null\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^?\",[]],\"runWhenPageLoadsDelay\",\"\",\"warningCodes\",[\"^?\",[]],\"data\",null,\"recordId\",\"\",\"importedQueryInputs\",[\"^13\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"dataArray\",[\"^?\",[]],\"cacheKeyTtl\",\"\",\"filterBy\",\"\",\"requestSentTimestamp\",null,\"databaseHostOverride\",\"\",\"metadata\",null,\"workflowActionType\",null,\"editorMode\",\"sql\",\"queryRunTime\",null,\"actionType\",\"\",\"changesetObject\",\"\",\"shouldUseLegacySql\",false,\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"finished\",null,\"databaseNameOverride\",\"\",\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",\"\",\"watchedParams\",[\"^?\",[]],\"enableErrorTransformer\",false,\"enableBulkUpdates\",false,\"showLatestVersionUpdatedWarning\",false,\"timestamp\",0,\"importedQueryDefaults\",[\"^13\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"overrideOrgCacheForUserCache\",false,\"bulkUpdatePrimaryKey\",\"\",\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^?\",[[\"^13\",[\"event\",\"success\",\"type\",\"script\",\"method\",\"run\",\"pluginId\",\"\",\"targetId\",null,\"params\",[\"^13\",[\"src\",\"if (searchOperator.data.operator_id.length > 0) {\\n  searchLago.trigger();\\n} else {\\n  throw new Error('Operator not found!')\\n}\"]],\"waitType\",\"throttle\",\"waitMs\",\"1000\",\"id\",\"8b1d566b\"]]]],\"tableName\",\"\",\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^?\",[]],\"workflowBlockPluginId\",null,\"databaseUsernameOverride\",\"\",\"shouldEnableBatchQuerying\",false,\"doNotThrowOnNoOp\",false,\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"style\",null,\"position2\",null,\"mobilePosition2\",null,\"mobileAppPosition\",null,\"tabIndex\",null,\"container\",\"\",\"^7\",\"~m1687961825070\",\"updatedAt\",\"~m1688392539431\",\"folder\",\"\",\"presetName\",null,\"screen\",null,\"boxId\",null,\"subBoxIds\",null]]],\"searchLago\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"searchLago\",\"^14\",null,\"^15\",null,\"^16\",\"datasource\",\"^17\",\"RESTQuery\",\"^18\",null,\"^19\",\"REST-WithoutResource\",\"^1:\",null,\"^1;\",[\"^13\",[\"queryRefreshTime\",\"\",\"paginationLimit\",\"\",\"streamResponse\",false,\"body\",\"\",\"lastReceivedFromResourceAt\",null,\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"paginationPaginationField\",\"\",\"headers\",\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"key\\\":\\\"Authorization\\\",\\\"value\\\":\\\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\\\"},{\\\"key\\\":\\\"Content-Type\\\",\\\"value\\\":\\\"application/json\\\"}]\",\"workflowRunId\",null,\"showFailureToaster\",true,\"paginationEnabled\",false,\"query\",\"https://api.getlago.com/api/v1/subscriptions?external_customer_id={{textInput2.value}}&status[]=pending&status[]=active\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^?\",[]],\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^13\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"requestSentTimestamp\",null,\"cookies\",\"\",\"metadata\",null,\"workflowActionType\",null,\"queryRunTime\",null,\"changesetObject\",\"\",\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"finished\",null,\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",\"\",\"watchedParams\",[\"^?\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"paginationDataField\",\"\",\"timestamp\",0,\"importedQueryDefaults\",[\"^13\",[]],\"enableTransformer\",true,\"showUpdateSetValueDynamicallyToggle\",true,\"version\",2,\"overrideOrgCacheForUserCache\",false,\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data.subscriptions.filter(sub => sub.plan_code.startsWith('marketing'))\",\"events\",[\"^?\",[]],\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"type\",\"GET\",\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^?\",[]],\"workflowBlockPluginId\",null,\"bodyType\",\"none\",\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^1<\",null,\"^1=\",null,\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688391790949\",\"^1B\",\"~m1691700246674\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"$main\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"$main\",\"^14\",null,\"^15\",null,\"^16\",\"frame\",\"^17\",\"Frame\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"type\",\"main\",\"sticky\",null,\"isHiddenOnDesktop\",false,\"isHiddenOnMobile\",false,\"paddingType\",\"normal\",\"padding\",\"8px 12px\"]],\"^1<\",[\"^13\",[]],\"^1=\",null,\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1687961985220\",\"^1B\",\"~m1692208289790\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"button1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"button1\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"ButtonWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"horizontalAlign\",\"stretch\",\"clickable\",false,\"iconAfter\",\"\",\"submitTargetId\",\"\",\"marginType\",\"normal\",\"hidden\",false,\"text\",\"Search\",\"showInEditor\",false,\"tooltipText\",\"\",\"styleVariant\",\"solid\",\"submit\",false,\"iconBefore\",\"\",\"events\",[\"^?\",[[\"^13\",[\"event\",\"click\",\"type\",\"datasource\",\"method\",\"trigger\",\"pluginId\",\"searchOperator\",\"targetId\",null,\"params\",[\"^13\",[]],\"waitType\",\"debounce\",\"waitMs\",\"0\",\"id\",\"a6793e5a\"]]]],\"loading\",false,\"loaderPosition\",\"auto\",\"disabled\",\"{{!textInput2.value}}\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"rowGroup\",\"body\",\"subcontainer\",\"\",\"row\",1.4,\"col\",4,\"height\",1,\"width\",2,\"tabNum\",0,\"stackPosition\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1687962061473\",\"^1B\",\"~m1688392294883\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"textInput2\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"textInput2\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextInputWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"spellCheck\",false,\"readOnly\",false,\"iconAfter\",\"\",\"showCharacterCount\",false,\"autoComplete\",false,\"marginType\",\"normal\",\"maxLength\",null,\"hidden\",false,\"customValidation\",\"\",\"patternType\",\"\",\"hideValidationMessage\",false,\"textBefore\",\"\",\"validationMessage\",\"\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"pattern\",\"\",\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",\"\",\"labelCaption\",\"\",\"labelWidth\",\"33\",\"autoFill\",\"\",\"placeholder\",\"Operator ID\",\"label\",\"\",\"_validate\",false,\"labelWidthUnit\",\"%\",\"invalid\",false,\"iconBefore\",\"\",\"minLength\",null,\"inputTooltip\",\"\",\"events\",[\"^13\",[]],\"autoCapitalize\",\"none\",\"loading\",false,\"disabled\",false,\"labelPosition\",\"left\",\"labelWrap\",false,\"maintainSpaceWhenHidden\",false,\"required\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",1.4,\"col\",0,\"^1J\",1,\"^1K\",4,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1687962511412\",\"^1B\",\"~m1691702841482\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"selectAction\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"selectAction\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"SelectWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"imageByIndex\",[],\"_disabledByIndex\",[\"^?\",[\"{{!State.value.canAddPlan}}\",\"{{!State.value.canUpgradeDowngradePlan}}\",\"{{!State.value.canCancelPlan}}\"]],\"showSelectionIndicator\",true,\"_values\",[\"^?\",[\"add\",\"upgrade-downgrade\",\"cancel-subscription\"]],\"iconByIndex\",[],\"values\",[],\"readOnly\",false,\"iconAfter\",\"\",\"_iconByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"overlayMinWidth\",null,\"allowDeselect\",false,\"inputValue\",\"\",\"marginType\",\"normal\",\"hidden\",false,\"customValidation\",\"\",\"data\",[],\"searchMode\",\"fuzzy\",\"hideValidationMessage\",false,\"fallbackTextByIndex\",[],\"textBefore\",\"\",\"_fallbackTextByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"selectedItem\",null,\"validationMessage\",\"\",\"automaticItemColors\",false,\"itemAdornmentShape\",\"circle\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",null,\"hiddenByIndex\",[],\"labelCaption\",\"\",\"labelWidth\",\"33\",\"deprecatedLabels\",[],\"_hiddenByIndex\",[\"^?\",[\"\",false,\"\"]],\"placeholder\",\"Select an option\",\"_captionByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"itemAdornmentSize\",\"auto\",\"label\",\"Action\",\"_hasMigratedNestedItems\",true,\"captionByIndex\",[],\"_validate\",false,\"itemMode\",\"static\",\"labelWidthUnit\",\"%\",\"allowCustomValue\",false,\"invalid\",false,\"selectedIndex\",null,\"_tooltipByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"_colorByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"tooltipByIndex\",[],\"iconBefore\",\"\",\"colorByIndex\",[],\"selectedLabel\",\"\",\"events\",[\"^13\",[]],\"_ids\",[\"^?\",[\"2c0f9\",\"ba8f1\",\"a19f6\"]],\"emptyMessage\",\"No options\",\"overlayMaxHeight\",375,\"loading\",false,\"disabled\",false,\"labelPosition\",\"left\",\"_labels\",[\"^?\",[\"Add a new marketing plan\",\"Upgrade/Downgrade plan\",\"Cancel marketing plan\"]],\"labelWrap\",false,\"disabledValues\",[],\"disabledByIndex\",[],\"maintainSpaceWhenHidden\",false,\"_imageByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"required\",false,\"labels\",[],\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",2.6000000000000005,\"col\",6,\"^1J\",1,\"^1K\",4,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1687963109340\",\"^1B\",\"~m1691706073273\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"selectPlan\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"selectPlan\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"SelectWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"imageByIndex\",[],\"_disabledByIndex\",[\"^?\",[\"\",\"\",false]],\"showSelectionIndicator\",true,\"_values\",[\"^?\",[\"marketing-seo-1-monthly\",\"marketing-seo-2-monthly\",\"marketing-seo-3-monthly\"]],\"iconByIndex\",[],\"values\",[],\"readOnly\",false,\"iconAfter\",\"\",\"_iconByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"overlayMinWidth\",null,\"allowDeselect\",false,\"inputValue\",\"\",\"marginType\",\"normal\",\"hidden\",false,\"customValidation\",\"\",\"data\",[],\"searchMode\",\"fuzzy\",\"hideValidationMessage\",false,\"fallbackTextByIndex\",[],\"textBefore\",\"\",\"_fallbackTextByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"selectedItem\",null,\"validationMessage\",\"\",\"automaticItemColors\",false,\"itemAdornmentShape\",\"circle\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",null,\"hiddenByIndex\",[],\"labelCaption\",\"\",\"labelWidth\",\"33\",\"deprecatedLabels\",[],\"_hiddenByIndex\",[\"^?\",[\"\",\"\",false]],\"placeholder\",\"Select an option\",\"_captionByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"itemAdornmentSize\",\"auto\",\"label\",\"New Plan\",\"_hasMigratedNestedItems\",true,\"captionByIndex\",[],\"_validate\",false,\"itemMode\",\"static\",\"labelWidthUnit\",\"%\",\"allowCustomValue\",false,\"invalid\",false,\"selectedIndex\",null,\"_tooltipByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"_colorByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"tooltipByIndex\",[],\"iconBefore\",\"\",\"colorByIndex\",[],\"selectedLabel\",\"\",\"events\",[\"^?\",[]],\"_ids\",[\"^?\",[\"2c0f9\",\"a19f6\",\"6b3de\"]],\"emptyMessage\",\"No options\",\"overlayMaxHeight\",375,\"loading\",false,\"disabled\",\"{{!['add', 'upgrade-downgrade'].includes(selectAction.value)}}\",\"labelPosition\",\"left\",\"_labels\",[\"^?\",[\"Marketing SEO Level 1\",\"Marketing SEO Level 2\",\"Marketing SEO Level 3\"]],\"labelWrap\",false,\"disabledValues\",[],\"disabledByIndex\",[],\"maintainSpaceWhenHidden\",false,\"_imageByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"required\",false,\"labels\",[],\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",4.6000000000000005,\"col\",6,\"^1J\",1,\"^1K\",4,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1687963651935\",\"^1B\",\"~m1692209141247\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"lagoCancelCurrent\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"lagoCancelCurrent\",\"^14\",null,\"^15\",null,\"^16\",\"datasource\",\"^17\",\"RESTQuery\",\"^18\",null,\"^19\",\"REST-WithoutResource\",\"^1:\",null,\"^1;\",[\"^13\",[\"queryRefreshTime\",\"\",\"paginationLimit\",\"\",\"streamResponse\",false,\"body\",\"\",\"lastReceivedFromResourceAt\",null,\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"paginationPaginationField\",\"\",\"headers\",\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"key\\\":\\\"Authorization\\\",\\\"value\\\":\\\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\\\"},{\\\"key\\\":\\\"Content-Type\\\",\\\"value\\\":\\\"application/json\\\"}]\",\"workflowRunId\",null,\"showFailureToaster\",true,\"paginationEnabled\",false,\"query\",\"https://api.getlago.com/api/v1/subscriptions/{{currentPlanExternalId}}\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^?\",[]],\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^13\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"requestSentTimestamp\",null,\"cookies\",\"\",\"metadata\",null,\"workflowActionType\",null,\"queryRunTime\",null,\"changesetObject\",\"\",\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"finished\",null,\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",\"\",\"watchedParams\",[\"^?\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"paginationDataField\",\"\",\"timestamp\",0,\"importedQueryDefaults\",[\"^13\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"version\",2,\"overrideOrgCacheForUserCache\",false,\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^?\",[]],\"isMultiplayerEdited\",false,\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"type\",\"DELETE\",\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^?\",[]],\"workflowBlockPluginId\",null,\"bodyType\",\"json\",\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^1<\",null,\"^1=\",null,\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688058318607\",\"^1B\",\"~m1697139125296\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"lagoAddSetupFee\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"lagoAddSetupFee\",\"^14\",null,\"^15\",null,\"^16\",\"datasource\",\"^17\",\"RESTQuery\",\"^18\",null,\"^19\",\"REST-WithoutResource\",\"^1:\",null,\"^1;\",[\"^13\",[\"queryRefreshTime\",\"\",\"paginationLimit\",\"\",\"streamResponse\",false,\"body\",\"{\\n  \\\"invoice\\\": {\\n    \\\"external_customer_id\\\": {{searchOperator.data.operator_id[0]}},\\n    \\\"currency\\\": \\\"USD\\\",\\n    \\\"fees\\\": [\\n      {\\n        \\\"add_on_code\\\": {{addOnCode}},\\n      }\\n    ]\\n  }\\n}\",\"lastReceivedFromResourceAt\",null,\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"paginationPaginationField\",\"\",\"headers\",\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"key\\\":\\\"Authorization\\\",\\\"value\\\":\\\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\\\"},{\\\"key\\\":\\\"Content-Type\\\",\\\"value\\\":\\\"application/json\\\"}]\",\"workflowRunId\",null,\"showFailureToaster\",true,\"paginationEnabled\",false,\"query\",\"https://api.getlago.com/api/v1/invoices\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^?\",[]],\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^13\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"requestSentTimestamp\",null,\"cookies\",\"\",\"metadata\",null,\"workflowActionType\",null,\"queryRunTime\",null,\"changesetObject\",\"\",\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"finished\",null,\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",\"\",\"watchedParams\",[\"^?\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"paginationDataField\",\"\",\"timestamp\",0,\"importedQueryDefaults\",[\"^13\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"version\",2,\"overrideOrgCacheForUserCache\",false,\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^?\",[]],\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"type\",\"POST\",\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^?\",[]],\"workflowBlockPluginId\",null,\"bodyType\",\"raw\",\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^1<\",null,\"^1=\",null,\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688410502275\",\"^1B\",\"~m1689270739380\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"lagoAddPrepaidCoupon\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"lagoAddPrepaidCoupon\",\"^14\",null,\"^15\",null,\"^16\",\"datasource\",\"^17\",\"RESTQuery\",\"^18\",null,\"^19\",\"REST-WithoutResource\",\"^1:\",null,\"^1;\",[\"^13\",[\"queryRefreshTime\",\"\",\"paginationLimit\",\"\",\"streamResponse\",false,\"body\",\"{\\n  \\\"applied_coupon\\\": {\\n    \\\"external_customer_id\\\": {{searchOperator.data.operator_id[0]}},\\n    \\\"coupon_code\\\": {{couponCode}},\\n  }\\n}\",\"lastReceivedFromResourceAt\",null,\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"paginationPaginationField\",\"\",\"headers\",\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"key\\\":\\\"Authorization\\\",\\\"value\\\":\\\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\\\"},{\\\"key\\\":\\\"Content-Type\\\",\\\"value\\\":\\\"application/json\\\"}]\",\"workflowRunId\",null,\"showFailureToaster\",true,\"paginationEnabled\",false,\"query\",\"https://api.getlago.com/api/v1/applied_coupons\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^?\",[]],\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^13\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"requestSentTimestamp\",null,\"cookies\",\"\",\"metadata\",null,\"workflowActionType\",null,\"queryRunTime\",null,\"changesetObject\",\"\",\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"finished\",null,\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",\"\",\"watchedParams\",[\"^?\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"paginationDataField\",\"\",\"timestamp\",0,\"importedQueryDefaults\",[\"^13\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"version\",2,\"overrideOrgCacheForUserCache\",false,\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^?\",[]],\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"type\",\"POST\",\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^?\",[]],\"workflowBlockPluginId\",null,\"bodyType\",\"raw\",\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^1<\",null,\"^1=\",null,\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692202511721\",\"^1B\",\"~m1692202661370\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"lagoAddSubscription\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"lagoAddSubscription\",\"^14\",null,\"^15\",null,\"^16\",\"datasource\",\"^17\",\"RESTQuery\",\"^18\",null,\"^19\",\"REST-WithoutResource\",\"^1:\",null,\"^1;\",[\"^13\",[\"queryRefreshTime\",\"\",\"paginationLimit\",\"\",\"streamResponse\",false,\"body\",\"{\\n  subscription: {\\n    external_id: {{uuid.v4()}},\\n    external_customer_id: {{searchOperator.data.operator_id[0]}},\\n    plan_code: {{planCode}},\\n    billing_time: 'anniversary',\\n    subscription_at: {{startDate}}\\n  }\\n}\",\"lastReceivedFromResourceAt\",null,\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"paginationPaginationField\",\"\",\"headers\",\"[{\\\"key\\\":\\\"\\\",\\\"value\\\":\\\"\\\"},{\\\"key\\\":\\\"Authorization\\\",\\\"value\\\":\\\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\\\"},{\\\"key\\\":\\\"Content-Type\\\",\\\"value\\\":\\\"application/json\\\"}]\",\"workflowRunId\",null,\"showFailureToaster\",true,\"paginationEnabled\",false,\"query\",\"https://api.getlago.com/api/v1/subscriptions?\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^?\",[]],\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^13\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"requestSentTimestamp\",null,\"cookies\",\"\",\"metadata\",null,\"workflowActionType\",null,\"queryRunTime\",null,\"changesetObject\",\"\",\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"finished\",null,\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",\"\",\"watchedParams\",[\"^?\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"paginationDataField\",\"\",\"timestamp\",0,\"importedQueryDefaults\",[\"^13\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"version\",2,\"overrideOrgCacheForUserCache\",false,\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^?\",[]],\"isMultiplayerEdited\",false,\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"type\",\"POST\",\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^?\",[]],\"workflowBlockPluginId\",null,\"bodyType\",\"raw\",\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^1<\",null,\"^1=\",null,\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688132870303\",\"^1B\",\"~m1692209510951\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"modal1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"modal1\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"ModalWidget\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"opened\",false,\"modalOverflowType\",\"scroll\",\"onModalClose\",\"\",\"modalHeightType\",\"fixed\",\"tooltipText\",\"\",\"modalHeight\",\"\",\"onModalOpen\",\"\",\"events\",[\"^?\",[]],\"modalWidth\",\"\",\"closeOnOutsideClick\",true,\"loading\",\"\",\"disabled\",\"\",\"buttonText\",\"Update SEO/Legacy Subscription\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",11.199999999999998,\"col\",7,\"^1J\",1,\"^1K\",3,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688135938154\",\"^1B\",\"~m1692208251059\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"button3\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"button3\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"ButtonWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"horizontalAlign\",\"stretch\",\"clickable\",false,\"iconAfter\",\"\",\"submitTargetId\",null,\"marginType\",\"normal\",\"hidden\",false,\"text\",\"Update\",\"showInEditor\",false,\"tooltipText\",\"\",\"styleVariant\",\"solid\",\"submit\",false,\"iconBefore\",\"\",\"events\",[\"^?\",[[\"^13\",[\"event\",\"click\",\"type\",\"datasource\",\"method\",\"trigger\",\"pluginId\",\"runSEOUpdate\",\"targetId\",null,\"params\",[\"^13\",[]],\"waitType\",\"throttle\",\"waitMs\",\"1000\",\"id\",\"63fa804e\"]]]],\"loading\",false,\"loaderPosition\",\"auto\",\"disabled\",false,\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"modal1\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",7.4,\"col\",2,\"^1J\",1,\"^1K\",8,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688135963492\",\"^1B\",\"~m1692208761556\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"text1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text1\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"marginType\",\"normal\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"tooltipText\",\"\",\"value\",\"Are you sure you want to update the subscription to {{selectAction.value === 'cancel-subscription' ? 'CANCELLED' : \\\"'\\\" + selectPlan.selectedLabel + \\\"'\\\"}}?\\n\\n**They will be billed immediately for any applicable changes**\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"modal1\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",2,\"col\",2,\"^1J\",0.6,\"^1K\",8,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688135970835\",\"^1B\",\"~m1692213704167\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"runPPCUpdate\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"runPPCUpdate\",\"^14\",null,\"^15\",null,\"^16\",\"datasource\",\"^17\",\"JavascriptQuery\",\"^18\",null,\"^19\",\"JavascriptQuery\",\"^1:\",null,\"^1;\",[\"^13\",[\"queryRefreshTime\",\"\",\"streamResponse\",false,\"lastReceivedFromResourceAt\",null,\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"workflowRunId\",null,\"showFailureToaster\",true,\"query\",\"function reset() {\\n  searchOperator.reset();\\n  modal1.close();\\n  selectAction.resetValue();\\n  selectPlan.resetValue();\\n  textInput2.resetValue();\\n  checkbox1.resetValue();\\n  dateTime1.resetValue();\\n\\n  modal2.close();\\n  selectAction2.resetValue();\\n  selectPlan2.resetValue();\\n  textInput2.resetValue();\\n  checkbox2.resetValue();\\n  dateTime2.resetValue();\\n}\\n\\nfunction getAddOnCode(lagoPlan, isChecked) {\\n  if (!isChecked) {\\n    return null;\\n  }\\n  if (lagoPlan === 'marketing-ppc-monthly') {\\n    return 'marketing-ppc-setup-fee';\\n  }\\n  return null;\\n}\\n\\n\\nfunction runQuery() {\\n  const newPlan = selectPlan2.value;\\n  const applySetupFee = checkbox2.value;\\n  const startDate = dateTime2.value.slice(0,-5) + 'Z';\\n  const action = selectAction2.value;\\n  \\n  // ADD\\n  if (action === 'add' && newPlan) {\\n      lagoAddSubscription.trigger({\\n            additionalScope: {\\n              planCode: newPlan,\\n              startDate: startDate,\\n            },\\n            onSuccess: function() {\\n              const addOnCode = getAddOnCode(newPlan, applySetupFee);\\n              if (addOnCode) {\\n                lagoAddSetupFee.trigger({\\n                  additionalScope: {\\n                    addOnCode: addOnCode\\n                  },\\n                  onSuccess: reset\\n                });\\n              } else {\\n                reset();\\n              }\\n            },\\n        });\\n    return;\\n  }\\n\\n\\n  // CANCEL SUBSCRIPTION\\n  if (action === 'cancel-subscription') {\\n    lagoCancelCurrent.trigger({\\n      onSuccess: reset,\\n      additionalScope: {\\n        currentPlanExternalId: State.value.ppcCurrentPlanId\\n      }\\n    });\\n   return;\\n  }\\n\\n  throw new Error('missing data, please fill out required forms');\\n}\\n\\nrunQuery();\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^?\",[]],\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^13\",[]],\"_additionalScope\",[\"^?\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"requestSentTimestamp\",null,\"metadata\",null,\"workflowActionType\",null,\"queryRunTime\",null,\"changesetObject\",\"\",\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"finished\",null,\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",null,\"watchedParams\",[\"^?\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"timestamp\",0,\"importedQueryDefaults\",[\"^13\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"overrideOrgCacheForUserCache\",false,\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^?\",[]],\"isMultiplayerEdited\",false,\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^?\",[]],\"workflowBlockPluginId\",null,\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^1<\",null,\"^1=\",null,\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208764506\",\"^1B\",\"~m1697139238994\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"runSEOUpdate\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"runSEOUpdate\",\"^14\",null,\"^15\",null,\"^16\",\"datasource\",\"^17\",\"JavascriptQuery\",\"^18\",null,\"^19\",\"JavascriptQuery\",\"^1:\",null,\"^1;\",[\"^13\",[\"queryRefreshTime\",\"\",\"streamResponse\",false,\"lastReceivedFromResourceAt\",null,\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"workflowRunId\",null,\"showFailureToaster\",true,\"query\",\"function reset() {\\n  searchOperator.reset();\\n  modal1.close();\\n  selectAction.resetValue();\\n  selectPlan.resetValue();\\n  textInput2.resetValue();\\n  checkbox1.resetValue();\\n  dateTime1.resetValue();\\n\\n  modal2.close();\\n  selectAction2.resetValue();\\n  selectPlan2.resetValue();\\n  textInput2.resetValue();\\n  checkbox2.resetValue();\\n  dateTime2.resetValue();\\n}\\n\\nfunction getAddOnCode(lagoPlan, isChecked) {\\n  if (!isChecked) {\\n    return null;\\n  }\\n  if (lagoPlan === 'marketing-seo-1-monthly') {\\n    return 'marketing-seo-1-setup-fee';\\n  }\\n  if (lagoPlan === 'marketing-seo-2-monthly') {\\n    return 'marketing-seo-2-setup-fee';\\n  }\\n  if (lagoPlan === 'marketing-seo-3-monthly') {\\n    return 'marketing-seo-3-setup-fee';\\n  }\\n  return null;\\n}\\n\\nfunction getCouponCode(lagoPlan, isChecked) {\\n  if (!isChecked) {\\n    return null;\\n  }\\n  if (lagoPlan === 'marketing-seo-1-monthly') {\\n    return 'marketing-seo-1-prepaid';\\n  }\\n  if (lagoPlan === 'marketing-seo-2-monthly') {\\n    return 'marketing-seo-2-prepaid';\\n  }\\n  if (lagoPlan === 'marketing-seo-3-monthly') {\\n    return 'marketing-seo-3-prepaid';\\n  }\\n  return null;\\n}\\n\\n\\nfunction runQuery() {\\n  const newPlan = selectPlan.value;\\n  const applySetupFee = checkbox1.value;\\n  const startDate = dateTime1.value.slice(0,-5) + 'Z';\\n  const action = selectAction.value;\\n  \\n  // ADD\\n  if (action === 'add' && newPlan) {\\n      lagoAddSubscription.trigger({\\n            additionalScope: {\\n              planCode: newPlan,\\n              startDate: startDate\\n            },\\n            onSuccess: function() {\\n              const addOnCode = getAddOnCode(newPlan, applySetupFee);\\n              if (addOnCode) {\\n                lagoAddSetupFee.trigger({\\n                  additionalScope: {\\n                    addOnCode: addOnCode\\n                  },\\n                  onSuccess: function() {\\n                    const couponCode = getCouponCode(newPlan, applySetupFee);\\n                    if (couponCode) {\\n                      lagoAddPrepaidCoupon.trigger({\\n                        additionalScope: {\\n                          couponCode: couponCode\\n                        },\\n                        onSuccess: reset\\n                      });\\n                    } else {\\n                      reset();\\n                    }\\n                  },\\n                })\\n              } else {\\n                reset();\\n              }\\n            },\\n        });\\n    return;\\n  }\\n\\n// UPGRADE/DOWNGRADE\\n  if (action === 'upgrade-downgrade' && selectPlan.value) {\\n      lagoCancelCurrent.trigger({\\n        onSuccess: function() {\\n          lagoAddSubscription.trigger({\\n            onSuccess: reset,\\n          });\\n        }\\n      });\\n    return;\\n}\\n  \\n\\n\\n  // CANCEL SUBSCRIPTION\\n  if (action === 'cancel-subscription') {\\n    lagoCancelCurrent.trigger({\\n      onSuccess: reset,\\n      additionalScope: {\\n        currentPlanExternalId: State.value.currentPlanId\\n      }\\n    });\\n   return;\\n  }\\n\\n  throw new Error('missing data, please fill out required forms');\\n}\\n\\nrunQuery();\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^?\",[]],\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^13\",[]],\"_additionalScope\",[\"^?\",[]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"requestSentTimestamp\",null,\"metadata\",null,\"workflowActionType\",null,\"queryRunTime\",null,\"changesetObject\",\"\",\"errorTransformer\",\"// The variable 'data' allows you to reference the request's data in the transformer. \\n// example: return data.find(element => element.isError)\\nreturn data.error\",\"finished\",null,\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",null,\"watchedParams\",[\"^?\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"timestamp\",0,\"importedQueryDefaults\",[\"^13\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"overrideOrgCacheForUserCache\",false,\"runWhenPageLoads\",false,\"transformer\",\"// type your code here\\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\\nreturn data\",\"events\",[\"^?\",[]],\"isMultiplayerEdited\",false,\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^?\",[]],\"workflowBlockPluginId\",null,\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^1<\",null,\"^1=\",null,\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688133548526\",\"^1B\",\"~m1697139143940\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"navigation1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"navigation1\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"NavigationWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"_disabledByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"heightType\",\"auto\",\"retoolStorageShowLegacyFiles\",false,\"iconByIndex\",[],\"srcWidth\",null,\"_iconByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"src\",\"\",\"overflowMode\",\"scroll\",\"_parentKeyByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"retoolFileObject\",[\"^ \"],\"_highlightByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"parentKeyByIndex\",[],\"retoolStorageFileId\",\"\",\"highlightByIndex\",[],\"_appTargetByIndex\",[\"^?\",[\"915c0950-175c-11ee-a803-9bd7604e06b4\",\"75490906-15be-11ee-9032-9b5e394cb9a1\",\"e6eebc72-19a6-11ee-a562-27f921366ca5\"]],\"marginType\",\"normal\",\"appTargetByIndex\",[],\"hidden\",false,\"data\",[],\"srcHeight\",null,\"itemTypeByIndex\",[],\"showInEditor\",false,\"_itemTypeByIndex\",[\"^?\",[\"app\",\"app\",\"app\"]],\"orientation\",\"horizontal\",\"tooltipText\",\"\",\"hiddenByIndex\",[],\"_hiddenByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"storageBlobId\",\"\",\"_captionByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"_hasMigratedNestedItems\",true,\"captionByIndex\",[],\"altText\",\"\",\"itemMode\",\"static\",\"dbBlobId\",\"\",\"_tooltipByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"_automaticallyHighlightedIndices\",[],\"tooltipByIndex\",[],\"events\",[\"^13\",[]],\"_ids\",[\"^?\",[\"71376\",\"763bd\",\"dcfec\"]],\"iconPositionByIndex\",[],\"_iconPositionByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"retoolStorageDynamicInput\",false,\"_keyByIndex\",[\"^?\",[\"\",\"\",\"\"]],\"disabled\",false,\"keyByIndex\",[],\"_labels\",[\"^?\",[\"New Customer\",\"Upgrade/Downgrade/Cancel\",\"Marketing Subscriptions\"]],\"srcType\",\"src\",\"disabledByIndex\",[],\"horizontalAlignment\",\"left\",\"maintainSpaceWhenHidden\",false,\"labels\",[],\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",0.6,\"col\",0,\"^1J\",0.8,\"^1K\",8,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688151567610\",\"^1B\",\"~m1688391551583\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"checkbox1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"checkbox1\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"CheckboxWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"marginType\",\"normal\",\"hidden\",false,\"customValidation\",\"\",\"hideValidationMessage\",false,\"validationMessage\",\"\",\"showInEditor\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",\"true\",\"labelCaption\",\"\",\"label\",\"Include Setup fee\",\"_validate\",false,\"invalid\",false,\"events\",[\"^13\",[]],\"disabled\",\"{{selectAction.value !== 'add'}}\",\"labelPosition\",\"right\",\"labelWrap\",false,\"maintainSpaceWhenHidden\",false,\"required\",false,\"margin\",\"4px 8px\",\"labelWidth\",100,\"labelWidthUnit\",\"%\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",5.8,\"col\",7,\"^1J\",0.6,\"^1K\",3,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688410745671\",\"^1B\",\"~m1692213285349\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"text2\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text2\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"marginType\",\"normal\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"tooltipText\",\"\",\"value\",\"*Note: setup fee will be charged immediately*\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",9.6,\"col\",7,\"^1J\",0.6,\"^1K\",3,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1688568115053\",\"^1B\",\"~m1688568129675\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"dateTime1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"dateTime1\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"DateTimeWidget\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"minDate\",\"\",\"minuteStep\",15,\"readOnly\",false,\"iconAfter\",\"\",\"timeFormat\",\"\",\"datePlaceholder\",\"{{ self.dateFormat.toUpperCase() }}\",\"dateFormat\",\"MMM d, yyyy\",\"timePlaceholder\",\"\",\"marginType\",\"normal\",\"valueTimeZone\",\"00:00\",\"hidden\",false,\"customValidation\",\"\",\"hideValidationMessage\",false,\"textBefore\",\"\",\"validationMessage\",\"\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",\"{{ new Date().toISOString()}}\",\"maxTime\",\"\",\"labelCaption\",\"\",\"maxDate\",\"\",\"labelWidth\",\"33\",\"label\",\"Start Billing On\",\"formattedValue\",\"\",\"_validate\",false,\"labelWidthUnit\",\"%\",\"firstDayOfWeek\",0,\"invalid\",false,\"iconBefore\",\"bold/interface-calendar\",\"events\",[\"^13\",[]],\"displayTimeZone\",\"local\",\"loading\",false,\"disabled\",\"{{!selectAction.value || selectAction.value === 'cancel-subscription'}}\",\"labelPosition\",\"left\",\"manageTimeZone\",false,\"labelWrap\",false,\"minTime\",\"\",\"maintainSpaceWhenHidden\",false,\"required\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",8.6,\"col\",6,\"^1J\",1,\"^1K\",4,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1689185463532\",\"^1B\",\"~m1692208984440\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"text3\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text3\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"marginType\",\"normal\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"tooltipText\",\"\",\"value\",\"*defaults to now, do not change unless you want future billing*\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",8.400000000000002,\"col\",10,\"^1J\",0.6,\"^1K\",2,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1689185571555\",\"^1B\",\"~m1692208405049\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"text4\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text4\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"marginType\",\"normal\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"tooltipText\",\"\",\"value\",\"Operator:  \\n## **{{searchOperator?.data ? searchOperator.data.name : \\\"-\\\"}}**\\n# **SEO/Legacy Plan**\\nPlan:\\n## **{{State.value.name}}**\\nStatus:\\n## **{{State.value.status}}**\\nStart Date:\\n## **{{State.value.startDate}}**\",\"style\",[\"^13\",[]],\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",2.8,\"col\",0,\"^1J\",0.6000000000000001,\"^1K\",6,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1691701476972\",\"^1B\",\"~m1692210037814\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"State\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"State\",\"^14\",null,\"^15\",null,\"^16\",\"function\",\"^17\",\"Function\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"funcBody\",\"const PlanCodeNameMap = {\\n  // old plans\\n  \\\"marketing-lite-monthly\\\": \\\"Marketing Lite (Monthly)\\\",\\n  \\\"marketing-advanced-monthly\\\": \\\"Marketing Advanced (Monthly)\\\",\\n  \\\"marketing-pro-monthly\\\": \\\"Marketing Professional (Monthly)\\\",\\n  \\\"marketing-enterprise-monthly\\\": \\\"Marketing Enterprise (Monthly)\\\",\\n\\n  // current plans\\n  \\\"marketing-seo-1-monthly\\\": \\\"Marketing SEO Level 1 (Monthly)\\\",\\n  \\\"marketing-seo-2-monthly\\\": \\\"Marketing SEO Level 2 (Monthly)\\\",\\n  \\\"marketing-seo-3-monthly\\\": \\\"Marketing SEO Level 3 (Monthly)\\\",\\n  \\\"marketing-ppc-monthly\\\": \\\"Marketing PPC (Monthly)\\\",\\n};\\n\\n// data is already filtered to be only marketing plans\\nconst data = {{ searchLago.data }} || [];\\n\\n// seo plan or legacy plan\\nconst seoSub = data.find(sub => !sub.plan_code.includes('-ppc-'));\\n\\n// ppc plan\\nconst ppcSub = data.find(sub => sub.plan_code.includes('-ppc-'));\\n\\nconst state = {\\n  // SEO/Legacy plan fields\\n  name: \\\"-\\\",\\n  status: \\\"-\\\",\\n  startDate: \\\"-\\\",\\n  currentPlanCode: null,\\n  currentPlanId: null,\\n\\n  canAddPlan: true,\\n  canUpgradeDowngradePlan: false,\\n  canCancelPlan: false,\\n\\n  // PPC plan fields\\n  ppcName: \\\"-\\\",\\n  ppcStatus: \\\"-\\\",\\n  ppcStartDate: \\\"-\\\",\\n  ppcCurrentPlanCode: null,\\n  ppcCurrentPlanId: null,\\n\\n  canAddPpcPlan: true,\\n  canCancelPpcPlan: false\\n};\\n\\nif (seoSub) {\\n  state.name = PlanCodeNameMap[seoSub.plan_code];\\n  state.status = seoSub.status;\\n  state.startDate = new Date(seoSub.subscription_at).toDateString();\\n  state.currentPlanCode = seoSub.plan_code;\\n  state.currentPlanId = seoSub.external_id;\\n\\n  \\n  state.canAddPlan = false;\\n  state.canUpgradeDowngradePlan = seoSub.status === 'active';\\n  state.canCancelPlan = seoSub.status === 'active';\\n}\\n\\nif (ppcSub) {\\n  state.ppcName = PlanCodeNameMap[ppcSub.plan_code];\\n  state.ppcStatus = ppcSub.status;\\n  state.ppcStartDate = new Date(ppcSub.subscription_at).toDateString();\\n  state.ppcCurrentPlanCode = ppcSub.plan_code;\\n  state.ppcCurrentPlanId = ppcSub.external_id;\\n  \\n  state.canAddPpcPlan = false;\\n  state.canCancelPpcPlan = ppcSub.status === 'active';\\n}\\n\\n\\nreturn state;\",\"value\",\"\",\"runBehavior\",\"debounced\"]],\"^1<\",null,\"^1=\",null,\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1691703270547\",\"^1B\",\"~m1697139222785\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"text5\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text5\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"marginType\",\"normal\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"tooltipText\",\"\",\"value\",\" \\n# **PPC Plan**\\nPlan:\\n## **{{State.value.ppcName}}**\\nStatus:\\n## **{{State.value.ppcStatus}}**\\nStart Date:\\n## **{{State.value.ppcStartDate}}**\",\"style\",[\"^13\",[]],\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",12.8,\"col\",0,\"^1J\",0.6,\"^1K\",6,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208138563\",\"^1B\",\"~m1692210125877\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"selectAction2\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"selectAction2\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"SelectWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"imageByIndex\",[],\"_disabledByIndex\",[\"^?\",[\"{{!State.value.canAddPpcPlan}}\",\"{{!State.value.canCancelPpcPlan}}\"]],\"showSelectionIndicator\",true,\"_values\",[\"^?\",[\"add\",\"cancel-subscription\"]],\"iconByIndex\",[],\"values\",[],\"readOnly\",false,\"iconAfter\",\"\",\"_iconByIndex\",[\"^?\",[\"\",\"\"]],\"overlayMinWidth\",null,\"allowDeselect\",false,\"inputValue\",\"\",\"marginType\",\"normal\",\"hidden\",false,\"customValidation\",\"\",\"data\",[],\"searchMode\",\"fuzzy\",\"hideValidationMessage\",false,\"fallbackTextByIndex\",[],\"textBefore\",\"\",\"_fallbackTextByIndex\",[\"^?\",[\"\",\"\"]],\"selectedItem\",null,\"validationMessage\",\"\",\"automaticItemColors\",false,\"itemAdornmentShape\",\"circle\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",null,\"hiddenByIndex\",[],\"labelCaption\",\"\",\"labelWidth\",\"33\",\"deprecatedLabels\",[],\"_hiddenByIndex\",[\"^?\",[\"\",\"\"]],\"placeholder\",\"Select an option\",\"_captionByIndex\",[\"^?\",[\"\",\"\"]],\"itemAdornmentSize\",\"auto\",\"label\",\"Action\",\"_hasMigratedNestedItems\",true,\"captionByIndex\",[],\"_validate\",false,\"itemMode\",\"static\",\"labelWidthUnit\",\"%\",\"allowCustomValue\",false,\"invalid\",false,\"selectedIndex\",null,\"_tooltipByIndex\",[\"^?\",[\"\",\"\"]],\"_colorByIndex\",[\"^?\",[\"\",\"\"]],\"tooltipByIndex\",[],\"iconBefore\",\"\",\"colorByIndex\",[],\"selectedLabel\",\"\",\"events\",[\"^13\",[]],\"_ids\",[\"^?\",[\"2c0f9\",\"a19f6\"]],\"emptyMessage\",\"No options\",\"overlayMaxHeight\",375,\"loading\",false,\"disabled\",false,\"labelPosition\",\"left\",\"_labels\",[\"^?\",[\"Add a new marketing plan\",\"Cancel marketing plan\"]],\"labelWrap\",false,\"disabledValues\",[],\"disabledByIndex\",[],\"maintainSpaceWhenHidden\",false,\"_imageByIndex\",[\"^?\",[\"\",\"\"]],\"required\",false,\"labels\",[],\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",12.8,\"col\",6,\"^1J\",1,\"^1K\",4,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208309114\",\"^1B\",\"~m1692208835616\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"selectPlan2\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"selectPlan2\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"SelectWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"imageByIndex\",[],\"_disabledByIndex\",[\"^?\",[false]],\"showSelectionIndicator\",true,\"_values\",[\"^?\",[\"marketing-ppc-monthly\"]],\"iconByIndex\",[],\"values\",[],\"readOnly\",false,\"iconAfter\",\"\",\"_iconByIndex\",[\"^?\",[\"\"]],\"overlayMinWidth\",null,\"allowDeselect\",false,\"inputValue\",\"\",\"marginType\",\"normal\",\"hidden\",false,\"customValidation\",\"\",\"data\",[],\"searchMode\",\"fuzzy\",\"hideValidationMessage\",false,\"fallbackTextByIndex\",[],\"textBefore\",\"\",\"_fallbackTextByIndex\",[\"^?\",[\"\"]],\"selectedItem\",null,\"validationMessage\",\"\",\"automaticItemColors\",false,\"itemAdornmentShape\",\"circle\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",null,\"hiddenByIndex\",[],\"labelCaption\",\"\",\"labelWidth\",\"33\",\"deprecatedLabels\",[],\"_hiddenByIndex\",[\"^?\",[false]],\"placeholder\",\"Select an option\",\"_captionByIndex\",[\"^?\",[\"\"]],\"itemAdornmentSize\",\"auto\",\"label\",\"New Plan\",\"_hasMigratedNestedItems\",true,\"captionByIndex\",[],\"_validate\",false,\"itemMode\",\"static\",\"labelWidthUnit\",\"%\",\"allowCustomValue\",false,\"invalid\",false,\"selectedIndex\",null,\"_tooltipByIndex\",[\"^?\",[\"\"]],\"_colorByIndex\",[\"^?\",[\"\"]],\"tooltipByIndex\",[],\"iconBefore\",\"\",\"colorByIndex\",[],\"selectedLabel\",\"\",\"events\",[\"^?\",[]],\"_ids\",[\"^?\",[\"0fd1b\"]],\"emptyMessage\",\"No options\",\"overlayMaxHeight\",375,\"loading\",false,\"disabled\",\"{{!['add'].includes(selectAction2.value)}}\",\"labelPosition\",\"left\",\"_labels\",[\"^?\",[\"Marketing PPC\"]],\"labelWrap\",false,\"disabledValues\",[],\"disabledByIndex\",[],\"maintainSpaceWhenHidden\",false,\"_imageByIndex\",[\"^?\",[\"\"]],\"required\",false,\"labels\",[],\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",16.599999999999998,\"col\",6,\"^1J\",1,\"^1K\",4,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208331890\",\"^1B\",\"~m1692208886602\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"checkbox2\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"checkbox2\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"CheckboxWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"marginType\",\"normal\",\"hidden\",false,\"customValidation\",\"\",\"hideValidationMessage\",false,\"validationMessage\",\"\",\"showInEditor\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",\"true\",\"labelCaption\",\"\",\"label\",\"Include Setup fee\",\"_validate\",false,\"invalid\",false,\"events\",[\"^13\",[]],\"disabled\",\"{{selectAction2.value !== 'add'}}\",\"labelPosition\",\"right\",\"labelWrap\",false,\"maintainSpaceWhenHidden\",false,\"required\",false,\"margin\",\"4px 8px\",\"labelWidth\",100,\"labelWidthUnit\",\"%\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",17.8,\"col\",7,\"^1J\",0.6,\"^1K\",3,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208346322\",\"^1B\",\"~m1692210901359\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"dateTime2\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"dateTime2\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"DateTimeWidget\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"minDate\",\"\",\"minuteStep\",15,\"readOnly\",false,\"iconAfter\",\"\",\"timeFormat\",\"\",\"datePlaceholder\",\"{{ self.dateFormat.toUpperCase() }}\",\"dateFormat\",\"MMM d, yyyy\",\"timePlaceholder\",\"\",\"marginType\",\"normal\",\"valueTimeZone\",\"00:00\",\"hidden\",false,\"customValidation\",\"\",\"hideValidationMessage\",false,\"textBefore\",\"\",\"validationMessage\",\"\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",\"{{ (function() { const a = new Date();  a.setDate(a.getDate() + 14); return a.toISOString();})()}}\",\"maxTime\",\"\",\"labelCaption\",\"\",\"maxDate\",\"\",\"labelWidth\",\"33\",\"label\",\"Start Billing On\",\"formattedValue\",\"\",\"_validate\",false,\"labelWidthUnit\",\"%\",\"firstDayOfWeek\",0,\"invalid\",false,\"iconBefore\",\"bold/interface-calendar\",\"events\",[\"^13\",[]],\"displayTimeZone\",\"local\",\"loading\",false,\"disabled\",\"{{selectAction2.value !== 'add'}}\",\"labelPosition\",\"left\",\"manageTimeZone\",false,\"labelWrap\",false,\"minTime\",\"\",\"maintainSpaceWhenHidden\",false,\"required\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",19,\"col\",6,\"^1J\",1,\"^1K\",4,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208357116\",\"^1B\",\"~m1692208940696\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"text6\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text6\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"marginType\",\"normal\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"tooltipText\",\"\",\"value\",\"*defaults to 2 weeks from now*\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",18.799999999999997,\"col\",10,\"^1J\",0.6,\"^1K\",2,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208372965\",\"^1B\",\"~m1692208418334\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"modal2\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"modal2\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"ModalWidget\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"opened\",false,\"modalOverflowType\",\"scroll\",\"onModalClose\",\"\",\"modalHeightType\",\"fixed\",\"tooltipText\",\"\",\"modalHeight\",\"\",\"onModalOpen\",\"\",\"events\",[\"^?\",[]],\"modalWidth\",\"\",\"closeOnOutsideClick\",true,\"loading\",\"\",\"disabled\",\"\",\"buttonText\",\"Update PPC Subscription\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",21.6,\"col\",7,\"^1J\",1,\"^1K\",3,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208440348\",\"^1B\",\"~m1692208448393\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"button4\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"button4\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"ButtonWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"horizontalAlign\",\"stretch\",\"clickable\",false,\"iconAfter\",\"\",\"submitTargetId\",null,\"marginType\",\"normal\",\"hidden\",false,\"text\",\"Update\",\"showInEditor\",false,\"tooltipText\",\"\",\"styleVariant\",\"solid\",\"submit\",false,\"iconBefore\",\"\",\"events\",[\"^?\",[[\"^13\",[\"event\",\"click\",\"type\",\"datasource\",\"method\",\"trigger\",\"pluginId\",\"runPPCUpdate\",\"targetId\",null,\"params\",[\"^13\",[]],\"waitType\",\"throttle\",\"waitMs\",\"1000\",\"id\",\"df3fce55\"]]]],\"loading\",false,\"loaderPosition\",\"auto\",\"disabled\",false,\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"modal2\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",7.4,\"col\",2,\"^1J\",1,\"^1K\",8,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208440354\",\"^1B\",\"~m1692209126839\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"text7\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text7\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"marginType\",\"normal\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"tooltipText\",\"\",\"value\",\"Are you sure you want to update the subscription to {{selectAction.value === 'cancel-subscription' ? 'CANCELLED' : \\\"'\\\" + selectPlan2.selectedLabel + \\\"'\\\"}}?\\n\\n**They will be billed immediately for any applicable changes**\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"modal2\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",2,\"col\",2,\"^1J\",0.6,\"^1K\",8,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692208440363\",\"^1B\",\"~m1692213687346\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"text8\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text8\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"marginType\",\"normal\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"tooltipText\",\"\",\"value\",\"*Note: setup fee will be charged immediately*\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",20.000000000000004,\"col\",7,\"^1J\",0.6,\"^1K\",3,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692210167227\",\"^1B\",\"~m1692210167227\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"spacer1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"spacer1\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"SpacerWidget\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"hidden\",false,\"maintainSpaceWhenHidden\",false,\"showInEditor\",false,\"marginType\",\"normal\",\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",13.4,\"col\",0,\"^1J\",1,\"^1K\",4,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692210264924\",\"^1B\",\"~m1692210264924\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]],\"text9\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text9\",\"^14\",null,\"^15\",null,\"^16\",\"widget\",\"^17\",\"TextWidget2\",\"^18\",null,\"^19\",null,\"^1:\",null,\"^1;\",[\"^13\",[\"heightType\",\"auto\",\"horizontalAlign\",\"left\",\"marginType\",\"normal\",\"hidden\",false,\"imageWidth\",\"fit\",\"showInEditor\",false,\"verticalAlign\",\"center\",\"tooltipText\",\"\",\"value\",\"**____________________________________________________________________________________________________________________________________________________________________________________________________________**\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false,\"margin\",\"4px 8px\"]],\"^1<\",[\"^13\",[]],\"^1=\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^16\",\"grid\",\"^1A\",\"\",\"^1H\",\"body\",\"^1I\",\"\",\"row\",12.200000000000001,\"col\",0,\"^1J\",0.6,\"^1K\",11,\"^1L\",0,\"^1M\",null]]],\"^1>\",null,\"^1?\",null,\"^1@\",null,\"^1A\",\"\",\"^7\",\"~m1692210320372\",\"^1B\",\"~m1692210428390\",\"^1C\",\"\",\"^1D\",null,\"^1E\",null,\"^1F\",null,\"^1G\",null]]]]],\"preloadedAppJavaScript\",null,\"preloadedAppJSLinks\",[],\"queryStatusVisibility\",false,\"responsiveLayoutDisabled\",false,\"rootScreen\",null,\"savePlatform\",\"web\",\"shortlink\",null,\"testEntities\",[],\"tests\",[],\"urlFragmentDefinitions\",[\"^?\",[]],\"version\",\"3.330.0\",\"serializedLayout\",null,\"agentEvals\",[\"^ \"]]]]"},"changesRecord":[{"type":"MIGRATIONS_SUCCESS","payload":{"migratedAppTemplate":{"tests":[],"folders":[],"plugins":{"$main":{"id":"$main","type":"frame","uuid":null,"style":{},"folder":"","screen":null,"subtype":"Frame","tabIndex":null,"template":{"type":"main","sticky":null,"paddingType":"normal","isHiddenOnMobile":false,"isHiddenOnDesktop":false},"container":"","createdAt":"2023-06-28T14:19:45.220Z","namespace":null,"position2":null,"updatedAt":"2023-08-16T17:51:29.790Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"State":{"id":"State","type":"function","uuid":null,"style":null,"folder":"","screen":null,"subtype":"Function","tabIndex":null,"template":{"value":"","funcBody":"const PlanCodeNameMap = {\n  // old plans\n  \"marketing-lite-monthly\": \"Marketing Lite (Monthly)\",\n  \"marketing-advanced-monthly\": \"Marketing Advanced (Monthly)\",\n  \"marketing-pro-monthly\": \"Marketing Professional (Monthly)\",\n  \"marketing-enterprise-monthly\": \"Marketing Enterprise (Monthly)\",\n\n  // current plans\n  \"marketing-seo-1-monthly\": \"Marketing SEO Level 1 (Monthly)\",\n  \"marketing-seo-2-monthly\": \"Marketing SEO Level 2 (Monthly)\",\n  \"marketing-seo-3-monthly\": \"Marketing SEO Level 3 (Monthly)\",\n  \"marketing-ppc-monthly\": \"Marketing PPC (Monthly)\",\n};\n\n// data is already filtered to be only marketing plans\nconst data = {{ searchLago.data }} || [];\n\n// seo plan or legacy plan\nconst seoSub = data.find(sub => !sub.plan_code.includes('-ppc-'));\n\n// ppc plan\nconst ppcSub = data.find(sub => sub.plan_code.includes('-ppc-'));\n\nconst state = {\n  // SEO/Legacy plan fields\n  name: \"-\",\n  status: \"-\",\n  startDate: \"-\",\n  currentPlanCode: null,\n  currentPlanId: null,\n\n  canAddPlan: true,\n  canUpgradeDowngradePlan: false,\n  canCancelPlan: false,\n\n  // PPC plan fields\n  ppcName: \"-\",\n  ppcStatus: \"-\",\n  ppcStartDate: \"-\",\n  ppcCurrentPlanCode: null,\n  ppcCurrentPlanId: null,\n\n  canAddPpcPlan: true,\n  canCancelPpcPlan: false\n};\n\nif (seoSub) {\n  state.name = PlanCodeNameMap[seoSub.plan_code];\n  state.status = seoSub.status;\n  state.startDate = new Date(seoSub.subscription_at).toDateString();\n  state.currentPlanCode = seoSub.plan_code;\n  state.currentPlanId = seoSub.external_id;\n\n  \n  state.canAddPlan = false;\n  state.canUpgradeDowngradePlan = seoSub.status === 'active';\n  state.canCancelPlan = seoSub.status === 'active';\n}\n\nif (ppcSub) {\n  state.ppcName = PlanCodeNameMap[ppcSub.plan_code];\n  state.ppcStatus = ppcSub.status;\n  state.ppcStartDate = new Date(ppcSub.subscription_at).toDateString();\n  state.ppcCurrentPlanCode = ppcSub.plan_code;\n  state.ppcCurrentPlanId = ppcSub.external_id;\n  \n  state.canAddPpcPlan = false;\n  state.canCancelPpcPlan = ppcSub.status === 'active';\n}\n\n\nreturn state;"},"container":"","createdAt":"2023-08-10T21:34:30.547Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:33:42.785Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text1":{"id":"text1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"Are you sure you want to update the subscription to {{selectAction.value === 'cancel-subscription' ? 'CANCELLED' : \"'\" + selectPlan.selectedLabel + \"'\"}}?\n\n**They will be billed immediately for any applicable changes**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-30T14:39:30.835Z","namespace":null,"position2":{"col":2,"row":2,"width":8,"height":0.6,"tabNum":0,"rowGroup":"body","container":"modal1","subcontainer":""},"updatedAt":"2023-08-16T19:21:44.167Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text2":{"id":"text2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*Note: setup fee will be charged immediately*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-05T14:41:55.053Z","namespace":null,"position2":{"col":7,"row":9.6,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-05T14:42:09.675Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text3":{"id":"text3","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*defaults to now, do not change unless you want future billing*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-12T18:12:51.555Z","namespace":null,"position2":{"col":10,"row":8.400000000000002,"width":2,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:53:25.049Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text4":{"id":"text4","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"style":{},"value":"Operator:  \n## **{{searchOperator?.data ? searchOperator.data.name : \"-\"}}**\n# **SEO/Legacy Plan**\nPlan:\n## **{{State.value.name}}**\nStatus:\n## **{{State.value.status}}**\nStart Date:\n## **{{State.value.startDate}}**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-10T21:04:36.972Z","namespace":null,"position2":{"col":0,"row":2.8,"width":6,"height":0.6000000000000001,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:20:37.814Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text5":{"id":"text5","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"style":{},"value":" \n# **PPC Plan**\nPlan:\n## **{{State.value.ppcName}}**\nStatus:\n## **{{State.value.ppcStatus}}**\nStart Date:\n## **{{State.value.ppcStartDate}}**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:48:58.563Z","namespace":null,"position2":{"col":0,"row":12.8,"width":6,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:22:05.877Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text6":{"id":"text6","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*defaults to 2 weeks from now*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:52.965Z","namespace":null,"position2":{"col":10,"row":18.799999999999997,"width":2,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:53:38.334Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text7":{"id":"text7","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"Are you sure you want to update the subscription to {{selectAction.value === 'cancel-subscription' ? 'CANCELLED' : \"'\" + selectPlan2.selectedLabel + \"'\"}}?\n\n**They will be billed immediately for any applicable changes**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:54:00.363Z","namespace":null,"position2":{"col":2,"row":2,"width":8,"height":0.6,"tabNum":0,"rowGroup":"body","container":"modal2","subcontainer":""},"updatedAt":"2023-08-16T19:21:27.346Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text8":{"id":"text8","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*Note: setup fee will be charged immediately*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T18:22:47.227Z","namespace":null,"position2":{"col":7,"row":20.000000000000004,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:22:47.227Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text9":{"id":"text9","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"**____________________________________________________________________________________________________________________________________________________________________________________________________________**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T18:25:20.372Z","namespace":null,"position2":{"col":0,"row":12.200000000000001,"width":11,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:27:08.390Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"modal1":{"id":"modal1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ModalWidget","tabIndex":null,"template":{"events":[],"opened":false,"loading":"","disabled":"","buttonText":"Update SEO/Legacy Subscription","modalWidth":"","modalHeight":"","onModalOpen":"","tooltipText":"","onModalClose":"","modalHeightType":"fixed","modalOverflowType":"scroll","closeOnOutsideClick":true},"container":"","createdAt":"2023-06-30T14:38:58.154Z","namespace":null,"position2":{"col":7,"row":11.199999999999998,"width":3,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:50:51.059Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"modal2":{"id":"modal2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ModalWidget","tabIndex":null,"template":{"events":[],"opened":false,"loading":"","disabled":"","buttonText":"Update PPC Subscription","modalWidth":"","modalHeight":"","onModalOpen":"","tooltipText":"","onModalClose":"","modalHeightType":"fixed","modalOverflowType":"scroll","closeOnOutsideClick":true},"container":"","createdAt":"2023-08-16T17:54:00.348Z","namespace":null,"position2":{"col":7,"row":21.6,"width":3,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:54:08.393Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button1":{"id":"button1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Search","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"0","pluginId":"searchOperator","targetId":null,"waitType":"debounce"}],"hidden":false,"submit":false,"loading":false,"disabled":"{{!textInput2.value}}","clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":"","horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:21:01.473Z","namespace":null,"position2":{"col":4,"row":1.4,"width":2,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T13:51:34.883Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button3":{"id":"button3","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Update","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"1000","pluginId":"runSEOUpdate","targetId":null,"waitType":"throttle"}],"hidden":false,"submit":false,"loading":false,"disabled":false,"clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":null,"horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-30T14:39:23.492Z","namespace":null,"position2":{"col":2,"row":7.4,"width":8,"height":1,"tabNum":0,"rowGroup":"body","container":"modal1","subcontainer":""},"updatedAt":"2023-08-16T17:59:21.556Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button4":{"id":"button4","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Update","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"1000","pluginId":"runPPCUpdate","targetId":null,"waitType":"throttle"}],"hidden":false,"submit":false,"loading":false,"disabled":false,"clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":null,"horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:54:00.354Z","namespace":null,"position2":{"col":2,"row":7.4,"width":8,"height":1,"tabNum":0,"rowGroup":"body","container":"modal2","subcontainer":""},"updatedAt":"2023-08-16T18:05:26.839Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"spacer1":{"id":"spacer1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SpacerWidget","tabIndex":null,"template":{"hidden":false,"marginType":"normal","showInEditor":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T18:24:24.924Z","namespace":null,"position2":{"col":0,"row":13.4,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:24:24.924Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"checkbox1":{"id":"checkbox1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"CheckboxWidget2","tabIndex":null,"template":{"label":"Include Setup fee","value":"true","events":{},"hidden":false,"invalid":false,"disabled":"{{selectAction.value !== 'add'}}","required":false,"_validate":false,"labelWrap":false,"labelAlign":"left","marginType":"normal","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"right","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-03T18:59:05.671Z","namespace":null,"position2":{"col":7,"row":5.8,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T19:14:45.349Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"checkbox2":{"id":"checkbox2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"CheckboxWidget2","tabIndex":null,"template":{"label":"Include Setup fee","value":"true","events":{},"hidden":false,"invalid":false,"disabled":"{{selectAction2.value !== 'add'}}","required":false,"_validate":false,"labelWrap":false,"labelAlign":"left","marginType":"normal","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"right","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:26.322Z","namespace":null,"position2":{"col":7,"row":17.8,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:35:01.359Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"dateTime1":{"id":"dateTime1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"DateTimeWidget","tabIndex":null,"template":{"label":"Start Billing On","value":"{{ new Date().toISOString()}}","events":{},"hidden":false,"invalid":false,"loading":false,"maxDate":"","maxTime":"","minDate":"","minTime":"","disabled":"{{!selectAction.value || selectAction.value === 'cancel-subscription'}}","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","dateFormat":"MMM d, yyyy","iconBefore":"bold/interface-calendar","labelAlign":"left","labelWidth":"33","marginType":"normal","minuteStep":15,"textBefore":"","timeFormat":"","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"left","valueTimeZone":"00:00","firstDayOfWeek":0,"formattedValue":"","labelWidthUnit":"%","manageTimeZone":false,"datePlaceholder":"{{ self.dateFormat.toUpperCase() }}","displayTimeZone":"local","timePlaceholder":"","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-12T18:11:03.532Z","namespace":null,"position2":{"col":6,"row":8.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:03:04.440Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"dateTime2":{"id":"dateTime2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"DateTimeWidget","tabIndex":null,"template":{"label":"Start Billing On","value":"{{ (function() { const a = new Date();  a.setDate(a.getDate() + 14); return a.toISOString();})()}}","events":{},"hidden":false,"invalid":false,"loading":false,"maxDate":"","maxTime":"","minDate":"","minTime":"","disabled":"{{selectAction2.value !== 'add'}}","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","dateFormat":"MMM d, yyyy","iconBefore":"bold/interface-calendar","labelAlign":"left","labelWidth":"33","marginType":"normal","minuteStep":15,"textBefore":"","timeFormat":"","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"left","valueTimeZone":"00:00","firstDayOfWeek":0,"formattedValue":"","labelWidthUnit":"%","manageTimeZone":false,"datePlaceholder":"{{ self.dateFormat.toUpperCase() }}","displayTimeZone":"local","timePlaceholder":"","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:37.116Z","namespace":null,"position2":{"col":6,"row":19,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:02:20.696Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"searchLago":{"id":"searchLago","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"","data":null,"type":"GET","error":null,"query":"https://api.getlago.com/api/v1/subscriptions?external_customer_id={{textInput2.value}}&status[]=pending&status[]=active","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"none","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data.subscriptions.filter(sub => sub.plan_code.startsWith('marketing'))","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":true,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-07-03T13:43:10.949Z","namespace":null,"position2":null,"updatedAt":"2023-08-10T20:44:06.674Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectPlan":{"id":"selectPlan","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","a19f6","6b3de"],"data":[],"label":"New Plan","value":null,"events":[],"hidden":false,"labels":[],"values":[],"_labels":["Marketing SEO Level 1","Marketing SEO Level 2","Marketing SEO Level 3"],"_values":["marketing-seo-1-monthly","marketing-seo-2-monthly","marketing-seo-3-monthly"],"invalid":false,"loading":false,"disabled":"{{!['add', 'upgrade-downgrade'].includes(selectAction.value)}}","itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["","",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["","",""],"_imageByIndex":["","",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["","",false],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["","",false],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["","",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:47:31.935Z","namespace":null,"position2":{"col":6,"row":4.6000000000000005,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:05:41.247Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"textInput2":{"id":"textInput2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextInputWidget2","tabIndex":null,"template":{"label":"","value":"","events":{},"hidden":false,"invalid":false,"loading":false,"pattern":"","autoFill":"","disabled":false,"readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"maxLength":null,"minLength":null,"showClear":false,"textAfter":"","iconBefore":"","labelAlign":"left","labelWidth":"33","marginType":"normal","spellCheck":false,"textBefore":"","formDataKey":"{{ self.id }}","patternType":"","placeholder":"Operator ID","tooltipText":"","autoComplete":false,"inputTooltip":"","labelCaption":"","showInEditor":false,"labelPosition":"left","autoCapitalize":"none","labelWidthUnit":"%","customValidation":"","validationMessage":"","showCharacterCount":false,"hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:28:31.412Z","namespace":null,"position2":{"col":0,"row":1.4,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-10T21:27:21.482Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"navigation1":{"id":"navigation1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"NavigationWidget2","tabIndex":null,"template":{"src":"","_ids":["71376","763bd","dcfec"],"data":[],"events":{},"hidden":false,"labels":[],"_labels":["New Customer","Upgrade/Downgrade/Cancel","Marketing Subscriptions"],"altText":"","srcType":"src","dbBlobId":"","disabled":false,"itemMode":"static","srcWidth":null,"srcHeight":null,"heightType":"auto","keyByIndex":[],"marginType":"normal","_keyByIndex":["","",""],"iconByIndex":[],"orientation":"horizontal","tooltipText":"","_iconByIndex":["","",""],"overflowMode":"scroll","showInEditor":false,"hiddenByIndex":[],"storageBlobId":"","_hiddenByIndex":["","",""],"captionByIndex":[],"tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"itemTypeByIndex":[],"_disabledByIndex":["","",""],"_itemTypeByIndex":["app","app","app"],"appTargetByIndex":[],"highlightByIndex":[],"parentKeyByIndex":[],"retoolFileObject":{},"_appTargetByIndex":["915c0950-175c-11ee-a803-9bd7604e06b4","75490906-15be-11ee-9032-9b5e394cb9a1","e6eebc72-19a6-11ee-a562-27f921366ca5"],"_highlightByIndex":["","",""],"_parentKeyByIndex":["","",""],"horizontalAlignment":"left","iconPositionByIndex":[],"retoolStorageFileId":"","_iconPositionByIndex":["","",""],"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false,"retoolStorageDynamicInput":false,"retoolStorageShowLegacyFiles":false,"_automaticallyHighlightedIndices":[]},"container":"","createdAt":"2023-06-30T18:59:27.610Z","namespace":null,"position2":{"col":0,"row":0.6,"width":8,"height":0.8,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T13:39:11.583Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectPlan2":{"id":"selectPlan2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["0fd1b"],"data":[],"label":"New Plan","value":null,"events":[],"hidden":false,"labels":[],"values":[],"_labels":["Marketing PPC"],"_values":["marketing-ppc-monthly"],"invalid":false,"loading":false,"disabled":"{{!['add'].includes(selectAction2.value)}}","itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":[""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":[""],"_imageByIndex":[""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":[false],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":[""],"_tooltipByIndex":[""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":[false],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":[""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:11.890Z","namespace":null,"position2":{"col":6,"row":16.599999999999998,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:01:26.602Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"runPPCUpdate":{"id":"runPPCUpdate","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"JavascriptQuery","tabIndex":null,"template":{"data":null,"error":null,"query":"function reset() {\n  searchOperator.reset();\n  modal1.close();\n  selectAction.resetValue();\n  selectPlan.resetValue();\n  textInput2.resetValue();\n  checkbox1.resetValue();\n  dateTime1.resetValue();\n\n  modal2.close();\n  selectAction2.resetValue();\n  selectPlan2.resetValue();\n  textInput2.resetValue();\n  checkbox2.resetValue();\n  dateTime2.resetValue();\n}\n\nfunction getAddOnCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-ppc-monthly') {\n    return 'marketing-ppc-setup-fee';\n  }\n  return null;\n}\n\n\nfunction runQuery() {\n  const newPlan = selectPlan2.value;\n  const applySetupFee = checkbox2.value;\n  const startDate = dateTime2.value.slice(0,-5) + 'Z';\n  const action = selectAction2.value;\n  \n  // ADD\n  if (action === 'add' && newPlan) {\n      lagoAddSubscription.trigger({\n            additionalScope: {\n              planCode: newPlan,\n              startDate: startDate,\n            },\n            onSuccess: function() {\n              const addOnCode = getAddOnCode(newPlan, applySetupFee);\n              if (addOnCode) {\n                lagoAddSetupFee.trigger({\n                  additionalScope: {\n                    addOnCode: addOnCode\n                  },\n                  onSuccess: reset\n                });\n              } else {\n                reset();\n              }\n            },\n        });\n    return;\n  }\n\n\n  // CANCEL SUBSCRIPTION\n  if (action === 'cancel-subscription') {\n    lagoCancelCurrent.trigger({\n      onSuccess: reset,\n      additionalScope: {\n        currentPlanExternalId: State.value.ppcCurrentPlanId\n      }\n    });\n   return;\n  }\n\n  throw new Error('missing data, please fill out required forms');\n}\n\nrunQuery();","events":[],"rawData":null,"finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"_additionalScope":[],"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":null,"importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-08-16T17:59:24.506Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:33:58.994Z","resourceName":"JavascriptQuery","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"runSEOUpdate":{"id":"runSEOUpdate","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"JavascriptQuery","tabIndex":null,"template":{"data":null,"error":null,"query":"function reset() {\n  searchOperator.reset();\n  modal1.close();\n  selectAction.resetValue();\n  selectPlan.resetValue();\n  textInput2.resetValue();\n  checkbox1.resetValue();\n  dateTime1.resetValue();\n\n  modal2.close();\n  selectAction2.resetValue();\n  selectPlan2.resetValue();\n  textInput2.resetValue();\n  checkbox2.resetValue();\n  dateTime2.resetValue();\n}\n\nfunction getAddOnCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-seo-1-monthly') {\n    return 'marketing-seo-1-setup-fee';\n  }\n  if (lagoPlan === 'marketing-seo-2-monthly') {\n    return 'marketing-seo-2-setup-fee';\n  }\n  if (lagoPlan === 'marketing-seo-3-monthly') {\n    return 'marketing-seo-3-setup-fee';\n  }\n  return null;\n}\n\nfunction getCouponCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-seo-1-monthly') {\n    return 'marketing-seo-1-prepaid';\n  }\n  if (lagoPlan === 'marketing-seo-2-monthly') {\n    return 'marketing-seo-2-prepaid';\n  }\n  if (lagoPlan === 'marketing-seo-3-monthly') {\n    return 'marketing-seo-3-prepaid';\n  }\n  return null;\n}\n\n\nfunction runQuery() {\n  const newPlan = selectPlan.value;\n  const applySetupFee = checkbox1.value;\n  const startDate = dateTime1.value.slice(0,-5) + 'Z';\n  const action = selectAction.value;\n  \n  // ADD\n  if (action === 'add' && newPlan) {\n      lagoAddSubscription.trigger({\n            additionalScope: {\n              planCode: newPlan,\n              startDate: startDate\n            },\n            onSuccess: function() {\n              const addOnCode = getAddOnCode(newPlan, applySetupFee);\n              if (addOnCode) {\n                lagoAddSetupFee.trigger({\n                  additionalScope: {\n                    addOnCode: addOnCode\n                  },\n                  onSuccess: function() {\n                    const couponCode = getCouponCode(newPlan, applySetupFee);\n                    if (couponCode) {\n                      lagoAddPrepaidCoupon.trigger({\n                        additionalScope: {\n                          couponCode: couponCode\n                        },\n                        onSuccess: reset\n                      });\n                    } else {\n                      reset();\n                    }\n                  },\n                })\n              } else {\n                reset();\n              }\n            },\n        });\n    return;\n  }\n\n// UPGRADE/DOWNGRADE\n  if (action === 'upgrade-downgrade' && selectPlan.value) {\n      lagoCancelCurrent.trigger({\n        onSuccess: function() {\n          lagoAddSubscription.trigger({\n            onSuccess: reset,\n          });\n        }\n      });\n    return;\n}\n  \n\n\n  // CANCEL SUBSCRIPTION\n  if (action === 'cancel-subscription') {\n    lagoCancelCurrent.trigger({\n      onSuccess: reset,\n      additionalScope: {\n        currentPlanExternalId: State.value.currentPlanId\n      }\n    });\n   return;\n  }\n\n  throw new Error('missing data, please fill out required forms');\n}\n\nrunQuery();","events":[],"rawData":null,"finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"_additionalScope":[],"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":null,"importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-30T13:59:08.526Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:32:23.940Z","resourceName":"JavascriptQuery","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectAction":{"id":"selectAction","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","ba8f1","a19f6"],"data":[],"label":"Action","value":null,"events":{},"hidden":false,"labels":[],"values":[],"_labels":["Add a new marketing plan","Upgrade/Downgrade plan","Cancel marketing plan"],"_values":["add","upgrade-downgrade","cancel-subscription"],"invalid":false,"loading":false,"disabled":false,"itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["","",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["","",""],"_imageByIndex":["","",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["",false,""],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["{{!State.value.canAddPlan}}","{{!State.value.canUpgradeDowngradePlan}}","{{!State.value.canCancelPlan}}"],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["","",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:38:29.340Z","namespace":null,"position2":{"col":6,"row":2.6000000000000005,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-10T22:21:13.273Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectAction2":{"id":"selectAction2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","a19f6"],"data":[],"label":"Action","value":null,"events":{},"hidden":false,"labels":[],"values":[],"_labels":["Add a new marketing plan","Cancel marketing plan"],"_values":["add","cancel-subscription"],"invalid":false,"loading":false,"disabled":false,"itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["",""],"_imageByIndex":["",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["",""],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["",""],"_tooltipByIndex":["",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["{{!State.value.canAddPpcPlan}}","{{!State.value.canCancelPpcPlan}}"],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:51:49.114Z","namespace":null,"position2":{"col":6,"row":12.8,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:00:35.616Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"searchOperator":{"id":"searchOperator","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"error":null,"query":"select * from operator\njoin subscription_log using(operator_id)\nwhere operator_id = {{textInput2.value}}\n  and subscription_log.removed_at is null","events":[{"type":"script","event":"success","method":"run","params":{"src":"if (searchOperator.data.operator_id.length > 0) {\n  searchLago.trigger();\n} else {\n  throw new Error('Operator not found!')\n}"},"waitMs":"1000","pluginId":"","targetId":null,"waitType":"throttle"}],"rawData":null,"records":"","filterBy":"","finished":null,"metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-28T14:17:05.070Z","namespace":null,"position2":null,"updatedAt":"2023-07-03T13:55:39.431Z","resourceName":"7744c302-1341-493f-9fa4-71b6dd5c5923","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddSetupFee":{"id":"lagoAddSetupFee","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  \"invoice\": {\n    \"external_customer_id\": {{searchOperator.data.operator_id[0]}},\n    \"currency\": \"USD\",\n    \"fees\": [\n      {\n        \"add_on_code\": {{addOnCode}},\n      }\n    ]\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/invoices","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-07-03T18:55:02.275Z","namespace":null,"position2":null,"updatedAt":"2023-07-13T17:52:19.380Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoCancelCurrent":{"id":"lagoCancelCurrent","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"","data":null,"type":"DELETE","error":null,"query":"https://api.getlago.com/api/v1/subscriptions/{{currentPlanExternalId}}","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"json","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-29T17:05:18.607Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:32:05.296Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddSubscription":{"id":"lagoAddSubscription","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  subscription: {\n    external_id: {{uuid.v4()}},\n    external_customer_id: {{searchOperator.data.operator_id[0]}},\n    plan_code: {{planCode}},\n    billing_time: 'anniversary',\n    subscription_at: {{startDate}}\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/subscriptions?","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-30T13:47:50.303Z","namespace":null,"position2":null,"updatedAt":"2023-08-16T18:11:50.951Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddPrepaidCoupon":{"id":"lagoAddPrepaidCoupon","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  \"applied_coupon\": {\n    \"external_customer_id\": {{searchOperator.data.operator_id[0]}},\n    \"coupon_code\": {{couponCode}},\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/applied_coupons","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-08-16T16:15:11.721Z","namespace":null,"position2":null,"updatedAt":"2023-08-16T16:17:41.370Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null}},"version":"3.18.0","appStyles":"","createdAt":null,"isFormApp":false,"shortlink":null,"appThemeId":null,"isFetching":false,"rootScreen":null,"appMaxWidth":"1560px","isMobileApp":false,"appThemeName":null,"testEntities":[],"isGlobalWidget":false,"customShortcuts":[],"mobileAppSettings":{"displaySetting":{"tabletMode":false,"landscapeMode":false},"mobileOfflineModeEnabled":false,"mobileOfflineModeDelaySync":false,"mobileOfflineModeBannerMode":"default"},"customDocumentTitle":"","preloadedAppJSLinks":[],"experimentalFeatures":{"sourceControlTemplateDehydration":false},"markdownLinkBehavior":"auto","multiScreenMobileApp":false,"queryStatusVisibility":false,"instrumentationEnabled":false,"pageLoadValueOverrides":[],"preloadedAppJavaScript":null,"urlFragmentDefinitions":[],"responsiveLayoutDisabled":false,"inAppRetoolPillAppearance":"NO_OVERRIDE","loadingIndicatorsDisabled":false,"customComponentCollections":[],"customDocumentTitleEnabled":false,"experimentalDataTabEnabled":true}}},{"type":"MIGRATIONS_SUCCESS","payload":{"migratedAppTemplate":{"tests":[],"folders":[],"plugins":{"$main":{"id":"$main","type":"frame","uuid":null,"style":{},"folder":"","screen":null,"subtype":"Frame","tabIndex":null,"template":{"type":"main","sticky":null,"isHiddenOnMobile":false,"isHiddenOnDesktop":false},"container":"","createdAt":"2023-06-28T14:19:45.220Z","namespace":null,"position2":null,"updatedAt":"2023-06-28T14:19:45.220Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text1":{"id":"text1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"Are you sure you want to update the subscription to {{select1.value === 'cancel-subscription' ? 'CANCELLED' : \"'\" + select2.selectedLabel + \"'\"}} for operator {{table1.selectedRow.name}}?\n\n**They will be billed immediately for any applicable changes**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-30T14:39:30.835Z","namespace":null,"position2":{"col":2,"row":2,"width":8,"height":0.6,"tabNum":0,"rowGroup":"body","container":"modal1","subcontainer":""},"updatedAt":"2023-06-30T14:44:27.903Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text2":{"id":"text2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*Note: setup fee will be charged immediately*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-05T14:41:55.053Z","namespace":null,"position2":{"col":7,"row":9.6,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-05T14:42:09.675Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text3":{"id":"text3","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*defaults to now, do not change unless you want future billing*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-12T18:12:51.555Z","namespace":null,"position2":{"col":10,"row":7.800000000000002,"width":2,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-12T18:14:26.799Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"modal1":{"id":"modal1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ModalWidget","tabIndex":null,"template":{"events":[],"opened":false,"loading":"","disabled":"","buttonText":"Update Subscription","modalWidth":"","modalHeight":"","onModalOpen":"","tooltipText":"","onModalClose":"","modalHeightType":"fixed","modalOverflowType":"scroll","closeOnOutsideClick":true},"container":"","createdAt":"2023-06-30T14:38:58.154Z","namespace":null,"position2":{"col":6,"row":10.2,"width":3,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-06-30T14:44:56.304Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button1":{"id":"button1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Search","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"0","pluginId":"searchOperator","targetId":null,"waitType":"debounce"}],"hidden":false,"submit":false,"loading":false,"disabled":"{{!textInput2.value}}","clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":"","horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:21:01.473Z","namespace":null,"position2":{"col":4,"row":1.4,"width":2,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T13:51:34.883Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button3":{"id":"button3","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Update","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"1000","pluginId":"runUpdate","targetId":null,"waitType":"throttle"}],"hidden":false,"submit":false,"loading":false,"disabled":false,"clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":null,"horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-30T14:39:23.492Z","namespace":null,"position2":{"col":2,"row":7.4,"width":8,"height":1,"tabNum":0,"rowGroup":"body","container":"modal1","subcontainer":""},"updatedAt":"2023-06-30T14:40:15.712Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"select1":{"id":"select1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","a19f6"],"data":[],"label":"Action","value":null,"events":{},"hidden":false,"labels":[],"values":[],"_labels":["Add/Upgrade/Downgrade","Cancel Subscription"],"_values":["add-upgrade-downgrade","cancel-subscription"],"invalid":false,"loading":false,"disabled":false,"itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["",""],"_imageByIndex":["",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["",""],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["",""],"_tooltipByIndex":["",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["","{{!keyValue1.data}}"],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:38:29.340Z","namespace":null,"position2":{"col":6,"row":2.6000000000000005,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T14:03:51.104Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"select2":{"id":"select2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","a19f6","6b3de","0fd1b"],"data":[],"label":"New Plan","value":null,"events":[],"hidden":false,"labels":[],"values":[],"_labels":["Marketing Lite","Marketing Advanced","Marketing Professional","Marketing Enterprise"],"_values":["marketing-lite-monthly","marketing-advanced-monthly","marketing-pro-monthly","marketing-enterprise-monthly"],"invalid":false,"loading":false,"disabled":"{{select1.value !== 'add-upgrade-downgrade'}}","itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["","","",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["","","",""],"_imageByIndex":["","","",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["","",false,false],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["","","",""],"_tooltipByIndex":["","","",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["","",false,false],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["","","",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:47:31.935Z","namespace":null,"position2":{"col":6,"row":4.6000000000000005,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-05T14:26:16.696Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"status1":{"id":"status1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"StatusWidget","tabIndex":null,"template":{"_ids":["d860f","bb23a","b7ca8"],"data":[],"value":"Operator Found","hidden":"{{!searchOperator.data || searchOperator.data.operator_id.length !== 1}}","labels":[],"values":[],"_labels":["Operator Found","Pending","Canceled"],"_values":["Operator Found","pending","canceled"],"itemMode":"static","heightType":"auto","marginType":"normal","iconByIndex":[],"_iconByIndex":["bold/interface-validation-check-circle","bold/interface-alert-warning-circle","bold/interface-delete-circle"],"colorByIndex":[],"iconPosition":"left","selectedItem":null,"showInEditor":false,"_colorByIndex":["{{ theme.success }}","{{ theme.warning }}","{{ theme.danger }}"],"selectedIndex":null,"selectedLabel":"","verticalAlign":"top","tooltipByIndex":[],"_tooltipByIndex":["","",""],"fallbackTooltip":"","horizontalAlign":"left","_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-03T22:50:47.982Z","namespace":null,"position2":{"col":6,"row":1.5999999999999999,"width":2,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-05T14:39:05.861Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"status2":{"id":"status2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"StatusWidget","tabIndex":null,"template":{"_ids":["d860f","bb23a","b7ca8"],"data":[],"value":"pending","hidden":"{{searchLago.data.length}}","labels":[],"values":[],"_labels":["Completed","No Current Marketing Plan","Canceled"],"_values":["completed","pending","canceled"],"itemMode":"static","heightType":"auto","marginType":"normal","iconByIndex":[],"_iconByIndex":["bold/interface-validation-check-circle","bold/interface-alert-warning-circle","bold/interface-delete-circle"],"colorByIndex":[],"iconPosition":"left","selectedItem":null,"showInEditor":false,"_colorByIndex":["{{ theme.success }}","{{ theme.warning }}","{{ theme.danger }}"],"selectedIndex":null,"selectedLabel":"","verticalAlign":"top","tooltipByIndex":[],"_tooltipByIndex":["","",""],"fallbackTooltip":"","horizontalAlign":"left","_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-03T22:54:01.325Z","namespace":null,"position2":{"col":0,"row":12.2,"width":6,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T22:57:23.477Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"checkbox1":{"id":"checkbox1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"CheckboxWidget2","tabIndex":null,"template":{"label":"Include Setup fee","value":false,"events":{},"hidden":false,"invalid":false,"disabled":"{{keyValue1.data && keyValue1.data.plan_code.startsWith('marketing')}}","required":false,"_validate":false,"labelWrap":false,"labelAlign":"left","marginType":"normal","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"right","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-03T18:59:05.671Z","namespace":null,"position2":{"col":7,"row":5.8,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T19:02:08.821Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"dateTime1":{"id":"dateTime1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"DateTimeWidget","tabIndex":null,"template":{"label":"Start Billing On","value":"{{ new Date().toISOString()}}","events":{},"hidden":false,"invalid":false,"loading":false,"maxDate":"","maxTime":"","minDate":"","minTime":"","disabled":false,"readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","dateFormat":"MMM d, yyyy","iconBefore":"bold/interface-calendar","labelAlign":"left","labelWidth":"33","marginType":"normal","minuteStep":15,"textBefore":"","timeFormat":"","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"left","valueTimeZone":"00:00","firstDayOfWeek":0,"formattedValue":"","labelWidthUnit":"%","manageTimeZone":false,"datePlaceholder":"{{ self.dateFormat.toUpperCase() }}","displayTimeZone":"local","timePlaceholder":"","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-12T18:11:03.532Z","namespace":null,"position2":{"col":6,"row":8.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-13T17:23:32.990Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"keyValue1":{"id":"keyValue1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"KeyValueMapWidget","tabIndex":null,"template":{"data":"{{searchLago.data[0]}}","rows":["a","b","c","operator_id","created_at","updated_at","record_id","firebase_id","name","general_email","voice_phone_number","name_slug","address","website_url","permit_number","booking_email","widget_banner_url","company_logo_url","location","stripe_account","twilio_phone_number","driver_reminder_trip_reminder_texts_enabled_at","custom_domain","custom_domain_from_name","sendgrid_custom_domain_response","custom_domain_is_valid","send_email_for_inbound_text_enabled_at","send_text_for_inbound_text_enabled_at","enable_credit_card_when_booking","driver_status_text_notifications_enabled_at","timezone_id","twilio_verification_service_sid","gratuity_when_booking","booking_cutoff_time_value","booking_cutoff_time_type","trip_reminder_text_notifications_enabled_at","moovs_network_enabled_at","gnet_id","driver_app_amount_due_enabled_at","active_for_analytics","stripe_customer","driver_reminder_pending_jobs_text_enabled_at","driver_reminder_update_trip_status_text_enabled_at","trip_cancellation_email_enabled_at","google_tracking_id","verified_at","driver_gratuity_preset_a","driver_gratuity_preset_b","driver_gratuity_preset_c","custom_gratuity_when_booking","cash_gratuity_when_booking","moovs_chat_number_as_primary","plan","onboarding_completed_at","subscription_log_id","removed_at","lago_plan_code","subscriptions","meta","lago_id","external_id","lago_customer_id","external_customer_id","plan_code","status","billing_time","subscription_at","started_at","terminated_at","canceled_at","previous_plan_code","next_plan_code","downgrade_plan_date","subscription_date","sequential_id","slug","country","address_line1","address_line2","state","zipcode","email","city","url","phone","logo_url","legal_name","legal_number","currency","tax_identification_number","timezone","applicable_timezone","billing_configuration","metadata","taxes"],"keyTitle":"Key","rowFormats":{},"rowMappers":{},"valueTitle":"Value","rowVisibility":{"a":true,"b":true,"c":true,"url":true,"city":true,"meta":true,"name":true,"plan":true,"slug":true,"email":true,"phone":true,"state":true,"taxes":true,"status":true,"address":false,"country":true,"gnet_id":false,"lago_id":false,"zipcode":true,"currency":true,"location":false,"logo_url":true,"metadata":true,"timezone":true,"name_slug":true,"plan_code":true,"record_id":false,"created_at":false,"legal_name":true,"removed_at":false,"started_at":true,"updated_at":false,"canceled_at":true,"external_id":false,"firebase_id":false,"operator_id":true,"timezone_id":false,"verified_at":false,"website_url":false,"billing_time":true,"legal_number":true,"address_line1":true,"address_line2":true,"booking_email":true,"custom_domain":false,"general_email":true,"permit_number":false,"sequential_id":true,"subscriptions":true,"terminated_at":true,"lago_plan_code":true,"next_plan_code":true,"stripe_account":false,"stripe_customer":false,"subscription_at":true,"company_logo_url":false,"lago_customer_id":false,"subscription_date":true,"widget_banner_url":false,"google_tracking_id":true,"previous_plan_code":true,"voice_phone_number":true,"applicable_timezone":true,"downgrade_plan_date":true,"subscription_log_id":true,"twilio_phone_number":false,"active_for_analytics":false,"external_customer_id":false,"billing_configuration":true,"gratuity_when_booking":false,"custom_domain_is_valid":false,"custom_domain_from_name":false,"onboarding_completed_at":true,"booking_cutoff_time_type":false,"driver_gratuity_preset_a":false,"driver_gratuity_preset_b":false,"driver_gratuity_preset_c":false,"moovs_network_enabled_at":false,"booking_cutoff_time_value":false,"tax_identification_number":true,"cash_gratuity_when_booking":false,"custom_gratuity_when_booking":false,"moovs_chat_number_as_primary":false,"enable_credit_card_when_booking":false,"sendgrid_custom_domain_response":false,"twilio_verification_service_sid":false,"driver_app_amount_due_enabled_at":false,"trip_cancellation_email_enabled_at":false,"send_text_for_inbound_text_enabled_at":false,"send_email_for_inbound_text_enabled_at":false,"driver_status_text_notifications_enabled_at":false,"trip_reminder_text_notifications_enabled_at":false,"driver_reminder_pending_jobs_text_enabled_at":false,"driver_reminder_trip_reminder_texts_enabled_at":false,"driver_reminder_update_trip_status_text_enabled_at":false},"prevRowFormats":{},"prevRowMappers":{},"rowHeaderNames":{},"rowMappersRenderAsHTML":{}},"container":"","createdAt":"2023-06-28T14:24:56.649Z","namespace":null,"position2":{"col":0,"row":2.4000000000000012,"width":6,"height":9.799999999999999,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T22:58:36.353Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"runUpdate":{"id":"runUpdate","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"JavascriptQuery","tabIndex":null,"template":{"data":null,"error":null,"query":"function reset() {\n  searchOperator.reset();\n  modal1.close();\n  select1.resetValue();\n  select2.resetValue();\n  keyValue1.data = null;\n  textInput2.resetValue();\n  checkbox1.resetValue();\n  dateTime1.resetValue();\n}\n\nfunction getAddOnCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-lite-monthly') {\n    return 'marketing-lite-setup-fee';\n  }\n  if (lagoPlan === 'marketing-advanced-monthly') {\n    return 'marketing-advanced-setup-fee';\n  }\n  if (lagoPlan === 'marketing-pro-monthly') {\n    return 'marketing-pro-setup-fee';\n  }\n  if (lagoPlan === 'marketing-enterprise-monthly') {\n    return 'marketing-enterprise-setup-fee';\n  }\n  return null;\n}\n\n\nfunction runQuery() {\n  // ADD/UPGRADE/DOWNGRADE\n  if (select1.value === 'add-upgrade-downgrade' && select2.value) {\n\n    // if no current marketing package we are adding vs upgrade/downgrade\n    if (!keyValue1.data || !keyValue1.data.plan_code.startsWith('marketing')) {\n        lagoAddSubscription.trigger({\n            onSuccess: function() {\n              var addOnCode = getAddOnCode(select2.value, checkbox1.value);\n              if (addOnCode) {\n                lagoAddSetupFee.trigger({\n                  additionalScope: {\n                    addOnCode: addOnCode\n                  },\n                  onSuccess: reset,\n                })\n              } else {\n                reset();\n              }\n            },\n        });\n    } else {\n      lagoCancelCurrent.trigger({\n        onSuccess: function() {\n          lagoAddSubscription.trigger({\n            onSuccess: reset,\n          });\n        }\n      });\n    }\n    return;\n  }\n\n\n  // CANCEL SUBSCRIPTION\n  if (select1.value === 'cancel-subscription') {\n    if (keyValue1.data.status !== 'active' || !keyValue1.data.plan_code.startsWith('marketing')) {\n      throw new Error('Cannt cancel this marketing package')\n    }\n    \n    lagoCancelCurrent.trigger({\n      onSuccess: reset\n    });\n   return;\n  }\n\n  throw new Error('missing data, please fill out required forms');\n}\n\nrunQuery();","events":[],"rawData":null,"finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"_additionalScope":[],"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":null,"importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-30T13:59:08.526Z","namespace":null,"position2":null,"updatedAt":"2023-07-12T18:12:32.425Z","resourceName":"JavascriptQuery","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"searchLago":{"id":"searchLago","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"","data":null,"type":"GET","error":null,"query":"https://api.getlago.com/api/v1/subscriptions?external_customer_id={{textInput2.value}}","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"none","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data.subscriptions.filter(sub => sub.plan_code.startsWith('marketing'))","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":true,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-07-03T13:43:10.949Z","namespace":null,"position2":null,"updatedAt":"2023-07-03T22:58:47.402Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"textInput2":{"id":"textInput2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextInputWidget2","tabIndex":null,"template":{"label":"Operator id","value":"","events":{},"hidden":false,"invalid":false,"loading":false,"pattern":"","autoFill":"","disabled":false,"readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"maxLength":null,"minLength":null,"showClear":false,"textAfter":"","iconBefore":"","labelAlign":"left","labelWidth":"33","marginType":"normal","spellCheck":false,"textBefore":"","formDataKey":"{{ self.id }}","patternType":"","placeholder":"Enter value","tooltipText":"","autoComplete":false,"inputTooltip":"","labelCaption":"","showInEditor":false,"labelPosition":"left","autoCapitalize":"none","labelWidthUnit":"%","customValidation":"","validationMessage":"","showCharacterCount":false,"hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:28:31.412Z","namespace":null,"position2":{"col":0,"row":1.4,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T13:47:59.703Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"navigation1":{"id":"navigation1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"NavigationWidget2","tabIndex":null,"template":{"src":"","_ids":["71376","763bd","dcfec"],"data":[],"events":{},"hidden":false,"labels":[],"_labels":["New Customer","Upgrade/Downgrade/Cancel","Marketing Subscriptions"],"altText":"","srcType":"src","dbBlobId":"","disabled":false,"itemMode":"static","srcWidth":null,"srcHeight":null,"heightType":"auto","keyByIndex":[],"marginType":"normal","_keyByIndex":["","",""],"iconByIndex":[],"orientation":"horizontal","tooltipText":"","_iconByIndex":["","",""],"overflowMode":"scroll","showInEditor":false,"hiddenByIndex":[],"storageBlobId":"","_hiddenByIndex":["","",""],"captionByIndex":[],"tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"itemTypeByIndex":[],"_disabledByIndex":["","",""],"_itemTypeByIndex":["app","app","app"],"appTargetByIndex":[],"highlightByIndex":[],"parentKeyByIndex":[],"retoolFileObject":{},"_appTargetByIndex":["915c0950-175c-11ee-a803-9bd7604e06b4","75490906-15be-11ee-9032-9b5e394cb9a1","e6eebc72-19a6-11ee-a562-27f921366ca5"],"_highlightByIndex":["","",""],"_parentKeyByIndex":["","",""],"horizontalAlignment":"left","iconPositionByIndex":[],"retoolStorageFileId":"","_iconPositionByIndex":["","",""],"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false,"retoolStorageDynamicInput":false,"retoolStorageShowLegacyFiles":false,"_automaticallyHighlightedIndices":[]},"container":"","createdAt":"2023-06-30T18:59:27.610Z","namespace":null,"position2":{"col":0,"row":0.6,"width":8,"height":0.8,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T13:39:11.583Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"searchOperator":{"id":"searchOperator","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"error":null,"query":"select * from operator\njoin subscription_log using(operator_id)\nwhere operator_id = {{textInput2.value}}\n  and subscription_log.removed_at is null","events":[{"type":"script","event":"success","method":"run","params":{"src":"if (searchOperator.data.operator_id.length > 0) {\n  searchLago.trigger();\n} else {\n  throw new Error('Operator not found!')\n}"},"waitMs":"1000","pluginId":"","targetId":null,"waitType":"throttle"}],"rawData":null,"records":"","filterBy":"","finished":null,"metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-28T14:17:05.070Z","namespace":null,"position2":null,"updatedAt":"2023-07-03T13:55:39.431Z","resourceName":"7744c302-1341-493f-9fa4-71b6dd5c5923","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddSetupFee":{"id":"lagoAddSetupFee","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  \"invoice\": {\n    \"external_customer_id\": {{searchOperator.data.operator_id[0]}},\n    \"currency\": \"USD\",\n    \"fees\": [\n      {\n        \"add_on_code\": {{addOnCode}},\n      }\n    ]\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/invoices","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-07-03T18:55:02.275Z","namespace":null,"position2":null,"updatedAt":"2023-07-13T17:52:19.380Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoCancelCurrent":{"id":"lagoCancelCurrent","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"","data":null,"type":"DELETE","error":null,"query":"https://api.getlago.com/api/v1/subscriptions/{{keyValue1.data.external_id}}","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"json","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-29T17:05:18.607Z","namespace":null,"position2":null,"updatedAt":"2023-07-03T14:08:17.696Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddSubscription":{"id":"lagoAddSubscription","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  subscription: {\n    external_id: {{uuid.v4()}},\n    external_customer_id: {{searchOperator.data.operator_id[0]}},\n    plan_code: {{select2.value}},\n    billing_time: 'anniversary',\n    subscription_at: {{dateTime1.value.slice(0,-5) + 'Z'}}\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/subscriptions?","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-30T13:47:50.303Z","namespace":null,"position2":null,"updatedAt":"2023-07-13T17:38:46.710Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null}},"version":"3.18.0","appStyles":"","createdAt":null,"isFormApp":false,"shortlink":null,"appThemeId":null,"isFetching":false,"rootScreen":null,"appMaxWidth":"1560px","isMobileApp":false,"appThemeName":null,"testEntities":[],"isGlobalWidget":false,"customShortcuts":[],"mobileAppSettings":{"displaySetting":{"tabletMode":false,"landscapeMode":false},"mobileOfflineModeEnabled":false,"mobileOfflineModeDelaySync":false,"mobileOfflineModeBannerMode":"default"},"customDocumentTitle":"","preloadedAppJSLinks":[],"experimentalFeatures":{"sourceControlTemplateDehydration":false},"markdownLinkBehavior":"auto","multiScreenMobileApp":false,"queryStatusVisibility":false,"instrumentationEnabled":false,"pageLoadValueOverrides":[],"preloadedAppJavaScript":null,"urlFragmentDefinitions":[],"responsiveLayoutDisabled":false,"inAppRetoolPillAppearance":"NO_OVERRIDE","loadingIndicatorsDisabled":false,"customComponentCollections":[],"customDocumentTitleEnabled":false,"experimentalDataTabEnabled":true}}},{"type":"MIGRATIONS_SUCCESS","payload":{"migratedAppTemplate":{"tests":[],"folders":[],"plugins":{"$main":{"id":"$main","type":"frame","uuid":null,"style":{},"folder":"","screen":null,"subtype":"Frame","tabIndex":null,"template":{"type":"main","sticky":null,"paddingType":"normal","isHiddenOnMobile":false,"isHiddenOnDesktop":false},"container":"","createdAt":"2023-06-28T14:19:45.220Z","namespace":null,"position2":null,"updatedAt":"2023-08-16T17:51:29.790Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"State":{"id":"State","type":"function","uuid":null,"style":null,"folder":"","screen":null,"subtype":"Function","tabIndex":null,"template":{"value":"","funcBody":"const PlanCodeNameMap = {\n  // old plans\n  \"marketing-lite-monthly\": \"Marketing Lite (Monthly)\",\n  \"marketing-advanced-monthly\": \"Marketing Advanced (Monthly)\",\n  \"marketing-pro-monthly\": \"Marketing Professional (Monthly)\",\n  \"marketing-enterprise-monthly\": \"Marketing Enterprise (Monthly)\",\n\n  // current plans\n  \"marketing-seo-1-monthly\": \"Marketing SEO Level 1 (Monthly)\",\n  \"marketing-seo-2-monthly\": \"Marketing SEO Level 2 (Monthly)\",\n  \"marketing-seo-3-monthly\": \"Marketing SEO Level 3 (Monthly)\",\n  \"marketing-ppc-monthly\": \"Marketing PPC (Monthly)\",\n};\n\n// data is already filtered to be only marketing plans\nconst data = {{ searchLago.data }} || [];\n\n// seo plan or legacy plan\nconst seoSub = data.find(sub => !sub.plan_code.includes('-ppc-'));\n\n// ppc plan\nconst ppcSub = data.find(sub => sub.plan_code.includes('-ppc-'));\n\nconst state = {\n  // SEO/Legacy plan fields\n  name: \"-\",\n  status: \"-\",\n  startDate: \"-\",\n  currentPlanCode: null,\n  currentPlanId: null,\n\n  canAddPlan: true,\n  canUpgradeDowngradePlan: false,\n  canCancelPlan: false,\n\n  // PPC plan fields\n  ppcName: \"-\",\n  ppcStatus: \"-\",\n  ppcStartDate: \"-\",\n  ppcCurrentPlanCode: null,\n  ppcCurrentPlanId: null,\n\n  canAddPpcPlan: true,\n  canCancelPpcPlan: false\n};\n\nif (seoSub) {\n  state.name = PlanCodeNameMap[seoSub.plan_code];\n  state.status = seoSub.status;\n  state.startDate = new Date(seoSub.subscription_at).toDateString();\n  state.currentPlanCode = seoSub.plan_code;\n  state.currentPlanId = seoSub.external_id;\n\n  \n  state.canAddPlan = false;\n  state.canUpgradeDowngradePlan = seoSub.status === 'active';\n  state.canCancelPlan = seoSub.status === 'active';\n}\n\nif (ppcSub) {\n  state.ppcName = PlanCodeNameMap[ppcSub.plan_code];\n  state.ppcStatus = ppcSub.status;\n  state.ppcStartDate = new Date(ppcSub.subscription_at).toDateString();\n  state.ppcCurrentPlanCode = ppcSub.plan_code;\n  state.ppcCurrentPlanId = ppcSub.external_id;\n  \n  state.canAddPpcPlan = false;\n  state.canCancelPpcPlan = ppcSub.status === 'active';\n}\n\n\nreturn state;"},"container":"","createdAt":"2023-08-10T21:34:30.547Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:33:42.785Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text1":{"id":"text1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"Are you sure you want to update the subscription to {{selectAction.value === 'cancel-subscription' ? 'CANCELLED' : \"'\" + selectPlan.selectedLabel + \"'\"}}?\n\n**They will be billed immediately for any applicable changes**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-30T14:39:30.835Z","namespace":null,"position2":{"col":2,"row":2,"width":8,"height":0.6,"tabNum":0,"rowGroup":"body","container":"modal1","subcontainer":""},"updatedAt":"2023-08-16T19:21:44.167Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text2":{"id":"text2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*Note: setup fee will be charged immediately*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-05T14:41:55.053Z","namespace":null,"position2":{"col":7,"row":9.6,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-05T14:42:09.675Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text3":{"id":"text3","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*defaults to now, do not change unless you want future billing*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-12T18:12:51.555Z","namespace":null,"position2":{"col":10,"row":8.400000000000002,"width":2,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:53:25.049Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text4":{"id":"text4","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"style":{},"value":"Operator:  \n## **{{searchOperator?.data ? searchOperator.data.name : \"-\"}}**\n# **SEO/Legacy Plan**\nPlan:\n## **{{State.value.name}}**\nStatus:\n## **{{State.value.status}}**\nStart Date:\n## **{{State.value.startDate}}**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-10T21:04:36.972Z","namespace":null,"position2":{"col":0,"row":2.8,"width":6,"height":0.6000000000000001,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:20:37.814Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text5":{"id":"text5","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"style":{},"value":" \n# **PPC Plan**\nPlan:\n## **{{State.value.ppcName}}**\nStatus:\n## **{{State.value.ppcStatus}}**\nStart Date:\n## **{{State.value.ppcStartDate}}**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:48:58.563Z","namespace":null,"position2":{"col":0,"row":12.8,"width":6,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:22:05.877Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text6":{"id":"text6","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*defaults to 2 weeks from now*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:52.965Z","namespace":null,"position2":{"col":10,"row":18.799999999999997,"width":2,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:53:38.334Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text7":{"id":"text7","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"Are you sure you want to update the subscription to {{selectAction.value === 'cancel-subscription' ? 'CANCELLED' : \"'\" + selectPlan2.selectedLabel + \"'\"}}?\n\n**They will be billed immediately for any applicable changes**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:54:00.363Z","namespace":null,"position2":{"col":2,"row":2,"width":8,"height":0.6,"tabNum":0,"rowGroup":"body","container":"modal2","subcontainer":""},"updatedAt":"2023-08-16T19:21:27.346Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text8":{"id":"text8","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*Note: setup fee will be charged immediately*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T18:22:47.227Z","namespace":null,"position2":{"col":7,"row":20.000000000000004,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:22:47.227Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text9":{"id":"text9","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"**____________________________________________________________________________________________________________________________________________________________________________________________________________**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T18:25:20.372Z","namespace":null,"position2":{"col":0,"row":12.200000000000001,"width":11,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:27:08.390Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"modal1":{"id":"modal1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ModalWidget","tabIndex":null,"template":{"events":[],"opened":false,"loading":"","disabled":"","buttonText":"Update SEO/Legacy Subscription","modalWidth":"","modalHeight":"","onModalOpen":"","tooltipText":"","onModalClose":"","modalHeightType":"fixed","modalOverflowType":"scroll","closeOnOutsideClick":true},"container":"","createdAt":"2023-06-30T14:38:58.154Z","namespace":null,"position2":{"col":7,"row":11.199999999999998,"width":3,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:50:51.059Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"modal2":{"id":"modal2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ModalWidget","tabIndex":null,"template":{"events":[],"opened":false,"loading":"","disabled":"","buttonText":"Update PPC Subscription","modalWidth":"","modalHeight":"","onModalOpen":"","tooltipText":"","onModalClose":"","modalHeightType":"fixed","modalOverflowType":"scroll","closeOnOutsideClick":true},"container":"","createdAt":"2023-08-16T17:54:00.348Z","namespace":null,"position2":{"col":7,"row":21.6,"width":3,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:54:08.393Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button1":{"id":"button1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Search","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"0","pluginId":"searchOperator","targetId":null,"waitType":"debounce"}],"hidden":false,"submit":false,"loading":false,"disabled":"{{!textInput2.value}}","clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":"","horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:21:01.473Z","namespace":null,"position2":{"col":4,"row":1.4,"width":2,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T13:51:34.883Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button3":{"id":"button3","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Update","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"1000","pluginId":"runSEOUpdate","targetId":null,"waitType":"throttle"}],"hidden":false,"submit":false,"loading":false,"disabled":false,"clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":null,"horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-30T14:39:23.492Z","namespace":null,"position2":{"col":2,"row":7.4,"width":8,"height":1,"tabNum":0,"rowGroup":"body","container":"modal1","subcontainer":""},"updatedAt":"2023-08-16T17:59:21.556Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button4":{"id":"button4","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Update","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"1000","pluginId":"runPPCUpdate","targetId":null,"waitType":"throttle"}],"hidden":false,"submit":false,"loading":false,"disabled":false,"clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":null,"horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:54:00.354Z","namespace":null,"position2":{"col":2,"row":7.4,"width":8,"height":1,"tabNum":0,"rowGroup":"body","container":"modal2","subcontainer":""},"updatedAt":"2023-08-16T18:05:26.839Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"spacer1":{"id":"spacer1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SpacerWidget","tabIndex":null,"template":{"hidden":false,"marginType":"normal","showInEditor":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T18:24:24.924Z","namespace":null,"position2":{"col":0,"row":13.4,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:24:24.924Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"checkbox1":{"id":"checkbox1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"CheckboxWidget2","tabIndex":null,"template":{"label":"Include Setup fee","value":"true","events":{},"hidden":false,"invalid":false,"disabled":"{{selectAction.value !== 'add'}}","required":false,"_validate":false,"labelWrap":false,"labelAlign":"left","marginType":"normal","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"right","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-03T18:59:05.671Z","namespace":null,"position2":{"col":7,"row":5.8,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T19:14:45.349Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"checkbox2":{"id":"checkbox2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"CheckboxWidget2","tabIndex":null,"template":{"label":"Include Setup fee","value":"true","events":{},"hidden":false,"invalid":false,"disabled":"{{selectAction2.value !== 'add'}}","required":false,"_validate":false,"labelWrap":false,"labelAlign":"left","marginType":"normal","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"right","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:26.322Z","namespace":null,"position2":{"col":7,"row":17.8,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:35:01.359Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"dateTime1":{"id":"dateTime1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"DateTimeWidget","tabIndex":null,"template":{"label":"Start Billing On","value":"{{ new Date().toISOString()}}","events":{},"hidden":false,"invalid":false,"loading":false,"maxDate":"","maxTime":"","minDate":"","minTime":"","disabled":"{{!selectAction.value || selectAction.value === 'cancel-subscription'}}","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","dateFormat":"MMM d, yyyy","iconBefore":"bold/interface-calendar","labelAlign":"left","labelWidth":"33","marginType":"normal","minuteStep":15,"textBefore":"","timeFormat":"","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"left","valueTimeZone":"00:00","firstDayOfWeek":0,"formattedValue":"","labelWidthUnit":"%","manageTimeZone":false,"datePlaceholder":"{{ self.dateFormat.toUpperCase() }}","displayTimeZone":"local","timePlaceholder":"","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-12T18:11:03.532Z","namespace":null,"position2":{"col":6,"row":8.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:03:04.440Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"dateTime2":{"id":"dateTime2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"DateTimeWidget","tabIndex":null,"template":{"label":"Start Billing On","value":"{{ (function() { const a = new Date();  a.setDate(a.getDate() + 14); return a.toISOString();})()}}","events":{},"hidden":false,"invalid":false,"loading":false,"maxDate":"","maxTime":"","minDate":"","minTime":"","disabled":"{{selectAction2.value !== 'add'}}","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","dateFormat":"MMM d, yyyy","iconBefore":"bold/interface-calendar","labelAlign":"left","labelWidth":"33","marginType":"normal","minuteStep":15,"textBefore":"","timeFormat":"","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"left","valueTimeZone":"00:00","firstDayOfWeek":0,"formattedValue":"","labelWidthUnit":"%","manageTimeZone":false,"datePlaceholder":"{{ self.dateFormat.toUpperCase() }}","displayTimeZone":"local","timePlaceholder":"","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:37.116Z","namespace":null,"position2":{"col":6,"row":19,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:02:20.696Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"searchLago":{"id":"searchLago","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"","data":null,"type":"GET","error":null,"query":"https://api.getlago.com/api/v1/subscriptions?external_customer_id={{textInput2.value}}&status[]=pending&status[]=active","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"none","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data.subscriptions.filter(sub => sub.plan_code.startsWith('marketing'))","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":true,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-07-03T13:43:10.949Z","namespace":null,"position2":null,"updatedAt":"2023-08-10T20:44:06.674Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectPlan":{"id":"selectPlan","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","a19f6","6b3de"],"data":[],"label":"New Plan","value":null,"events":[],"hidden":false,"labels":[],"values":[],"_labels":["Marketing SEO Level 1","Marketing SEO Level 2","Marketing SEO Level 3"],"_values":["marketing-seo-1-monthly","marketing-seo-2-monthly","marketing-seo-3-monthly"],"invalid":false,"loading":false,"disabled":"{{!['add', 'upgrade-downgrade'].includes(selectAction.value)}}","itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["","",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["","",""],"_imageByIndex":["","",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["","",false],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["","",false],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["","",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:47:31.935Z","namespace":null,"position2":{"col":6,"row":4.6000000000000005,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:05:41.247Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"textInput2":{"id":"textInput2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextInputWidget2","tabIndex":null,"template":{"label":"","value":"","events":{},"hidden":false,"invalid":false,"loading":false,"pattern":"","autoFill":"","disabled":false,"readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"maxLength":null,"minLength":null,"showClear":false,"textAfter":"","iconBefore":"","labelAlign":"left","labelWidth":"33","marginType":"normal","spellCheck":false,"textBefore":"","formDataKey":"{{ self.id }}","patternType":"","placeholder":"Operator ID","tooltipText":"","autoComplete":false,"inputTooltip":"","labelCaption":"","showInEditor":false,"labelPosition":"left","autoCapitalize":"none","labelWidthUnit":"%","customValidation":"","validationMessage":"","showCharacterCount":false,"hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:28:31.412Z","namespace":null,"position2":{"col":0,"row":1.4,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-10T21:27:21.482Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"navigation1":{"id":"navigation1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"NavigationWidget2","tabIndex":null,"template":{"src":"","_ids":["71376","763bd","dcfec"],"data":[],"events":{},"hidden":false,"labels":[],"_labels":["New Customer","Upgrade/Downgrade/Cancel","Marketing Subscriptions"],"altText":"","srcType":"src","dbBlobId":"","disabled":false,"itemMode":"static","srcWidth":null,"srcHeight":null,"heightType":"auto","keyByIndex":[],"marginType":"normal","_keyByIndex":["","",""],"iconByIndex":[],"orientation":"horizontal","tooltipText":"","_iconByIndex":["","",""],"overflowMode":"scroll","showInEditor":false,"hiddenByIndex":[],"storageBlobId":"","_hiddenByIndex":["","",""],"captionByIndex":[],"tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"itemTypeByIndex":[],"_disabledByIndex":["","",""],"_itemTypeByIndex":["app","app","app"],"appTargetByIndex":[],"highlightByIndex":[],"parentKeyByIndex":[],"retoolFileObject":{},"_appTargetByIndex":["915c0950-175c-11ee-a803-9bd7604e06b4","75490906-15be-11ee-9032-9b5e394cb9a1","e6eebc72-19a6-11ee-a562-27f921366ca5"],"_highlightByIndex":["","",""],"_parentKeyByIndex":["","",""],"horizontalAlignment":"left","iconPositionByIndex":[],"retoolStorageFileId":"","_iconPositionByIndex":["","",""],"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false,"retoolStorageDynamicInput":false,"retoolStorageShowLegacyFiles":false,"_automaticallyHighlightedIndices":[]},"container":"","createdAt":"2023-06-30T18:59:27.610Z","namespace":null,"position2":{"col":0,"row":0.6,"width":8,"height":0.8,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T13:39:11.583Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectPlan2":{"id":"selectPlan2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["0fd1b"],"data":[],"label":"New Plan","value":null,"events":[],"hidden":false,"labels":[],"values":[],"_labels":["Marketing PPC"],"_values":["marketing-ppc-monthly"],"invalid":false,"loading":false,"disabled":"{{!['add'].includes(selectAction2.value)}}","itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":[""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":[""],"_imageByIndex":[""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":[false],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":[""],"_tooltipByIndex":[""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":[false],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":[""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:11.890Z","namespace":null,"position2":{"col":6,"row":16.599999999999998,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:01:26.602Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"runPPCUpdate":{"id":"runPPCUpdate","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"JavascriptQuery","tabIndex":null,"template":{"data":null,"error":null,"query":"function reset() {\n  searchOperator.reset();\n  modal1.close();\n  selectAction.resetValue();\n  selectPlan.resetValue();\n  textInput2.resetValue();\n  checkbox1.resetValue();\n  dateTime1.resetValue();\n\n  modal2.close();\n  selectAction2.resetValue();\n  selectPlan2.resetValue();\n  textInput2.resetValue();\n  checkbox2.resetValue();\n  dateTime2.resetValue();\n}\n\nfunction getAddOnCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-ppc-monthly') {\n    return 'marketing-ppc-setup-fee';\n  }\n  return null;\n}\n\n\nfunction runQuery() {\n  const newPlan = selectPlan2.value;\n  const applySetupFee = checkbox2.value;\n  const startDate = dateTime2.value.slice(0,-5) + 'Z';\n  const action = selectAction2.value;\n  \n  // ADD\n  if (action === 'add' && newPlan) {\n      lagoAddSubscription.trigger({\n            additionalScope: {\n              planCode: newPlan,\n              startDate: startDate,\n            },\n            onSuccess: function() {\n              const addOnCode = getAddOnCode(newPlan, applySetupFee);\n              if (addOnCode) {\n                lagoAddSetupFee.trigger({\n                  additionalScope: {\n                    addOnCode: addOnCode\n                  },\n                  onSuccess: reset\n                });\n              } else {\n                reset();\n              }\n            },\n        });\n    return;\n  }\n\n\n  // CANCEL SUBSCRIPTION\n  if (action === 'cancel-subscription') {\n    lagoCancelCurrent.trigger({\n      onSuccess: reset,\n      additionalScope: {\n        currentPlanExternalId: State.value.ppcCurrentPlanId\n      }\n    });\n   return;\n  }\n\n  throw new Error('missing data, please fill out required forms');\n}\n\nrunQuery();","events":[],"rawData":null,"finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"_additionalScope":[],"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":null,"importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-08-16T17:59:24.506Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:33:58.994Z","resourceName":"JavascriptQuery","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"runSEOUpdate":{"id":"runSEOUpdate","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"JavascriptQuery","tabIndex":null,"template":{"data":null,"error":null,"query":"function reset() {\n  searchOperator.reset();\n  modal1.close();\n  selectAction.resetValue();\n  selectPlan.resetValue();\n  textInput2.resetValue();\n  checkbox1.resetValue();\n  dateTime1.resetValue();\n\n  modal2.close();\n  selectAction2.resetValue();\n  selectPlan2.resetValue();\n  textInput2.resetValue();\n  checkbox2.resetValue();\n  dateTime2.resetValue();\n}\n\nfunction getAddOnCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-seo-1-monthly') {\n    return 'marketing-seo-1-setup-fee';\n  }\n  if (lagoPlan === 'marketing-seo-2-monthly') {\n    return 'marketing-seo-2-setup-fee';\n  }\n  if (lagoPlan === 'marketing-seo-3-monthly') {\n    return 'marketing-seo-3-setup-fee';\n  }\n  return null;\n}\n\nfunction getCouponCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-seo-1-monthly') {\n    return 'marketing-seo-1-prepaid';\n  }\n  if (lagoPlan === 'marketing-seo-2-monthly') {\n    return 'marketing-seo-2-prepaid';\n  }\n  if (lagoPlan === 'marketing-seo-3-monthly') {\n    return 'marketing-seo-3-prepaid';\n  }\n  return null;\n}\n\n\nfunction runQuery() {\n  const newPlan = selectPlan.value;\n  const applySetupFee = checkbox1.value;\n  const startDate = dateTime1.value.slice(0,-5) + 'Z';\n  const action = selectAction.value;\n  \n  // ADD\n  if (action === 'add' && newPlan) {\n      lagoAddSubscription.trigger({\n            additionalScope: {\n              planCode: newPlan,\n              startDate: startDate\n            },\n            onSuccess: function() {\n              const addOnCode = getAddOnCode(newPlan, applySetupFee);\n              if (addOnCode) {\n                lagoAddSetupFee.trigger({\n                  additionalScope: {\n                    addOnCode: addOnCode\n                  },\n                  onSuccess: function() {\n                    const couponCode = getCouponCode(newPlan, applySetupFee);\n                    if (couponCode) {\n                      lagoAddPrepaidCoupon.trigger({\n                        additionalScope: {\n                          couponCode: couponCode\n                        },\n                        onSuccess: reset\n                      });\n                    } else {\n                      reset();\n                    }\n                  },\n                })\n              } else {\n                reset();\n              }\n            },\n        });\n    return;\n  }\n\n// UPGRADE/DOWNGRADE\n  if (action === 'upgrade-downgrade' && selectPlan.value) {\n      lagoCancelCurrent.trigger({\n        onSuccess: function() {\n          lagoAddSubscription.trigger({\n            onSuccess: reset,\n          });\n        }\n      });\n    return;\n}\n  \n\n\n  // CANCEL SUBSCRIPTION\n  if (action === 'cancel-subscription') {\n    lagoCancelCurrent.trigger({\n      onSuccess: reset,\n      additionalScope: {\n        currentPlanExternalId: State.value.currentPlanId\n      }\n    });\n   return;\n  }\n\n  throw new Error('missing data, please fill out required forms');\n}\n\nrunQuery();","events":[],"rawData":null,"finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"_additionalScope":[],"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":null,"importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-30T13:59:08.526Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:32:23.940Z","resourceName":"JavascriptQuery","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectAction":{"id":"selectAction","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","ba8f1","a19f6"],"data":[],"label":"Action","value":null,"events":{},"hidden":false,"labels":[],"values":[],"_labels":["Add a new marketing plan","Upgrade/Downgrade plan","Cancel marketing plan"],"_values":["add","upgrade-downgrade","cancel-subscription"],"invalid":false,"loading":false,"disabled":false,"itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["","",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["","",""],"_imageByIndex":["","",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["",false,""],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["{{!State.value.canAddPlan}}","{{!State.value.canUpgradeDowngradePlan}}","{{!State.value.canCancelPlan}}"],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["","",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:38:29.340Z","namespace":null,"position2":{"col":6,"row":2.6000000000000005,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-10T22:21:13.273Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectAction2":{"id":"selectAction2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","a19f6"],"data":[],"label":"Action","value":null,"events":{},"hidden":false,"labels":[],"values":[],"_labels":["Add a new marketing plan","Cancel marketing plan"],"_values":["add","cancel-subscription"],"invalid":false,"loading":false,"disabled":false,"itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["",""],"_imageByIndex":["",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["",""],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["",""],"_tooltipByIndex":["",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["{{!State.value.canAddPpcPlan}}","{{!State.value.canCancelPpcPlan}}"],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:51:49.114Z","namespace":null,"position2":{"col":6,"row":12.8,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:00:35.616Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"searchOperator":{"id":"searchOperator","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"error":null,"query":"select * from operator\njoin subscription_log using(operator_id)\nwhere operator_id = {{textInput2.value}}\n  and subscription_log.removed_at is null","events":[{"type":"script","event":"success","method":"run","params":{"src":"if (searchOperator.data.operator_id.length > 0) {\n  searchLago.trigger();\n} else {\n  throw new Error('Operator not found!')\n}"},"waitMs":"1000","pluginId":"","targetId":null,"waitType":"throttle"}],"rawData":null,"records":"","filterBy":"","finished":null,"metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-28T14:17:05.070Z","namespace":null,"position2":null,"updatedAt":"2023-07-03T13:55:39.431Z","resourceName":"7744c302-1341-493f-9fa4-71b6dd5c5923","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddSetupFee":{"id":"lagoAddSetupFee","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  \"invoice\": {\n    \"external_customer_id\": {{searchOperator.data.operator_id[0]}},\n    \"currency\": \"USD\",\n    \"fees\": [\n      {\n        \"add_on_code\": {{addOnCode}},\n      }\n    ]\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/invoices","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-07-03T18:55:02.275Z","namespace":null,"position2":null,"updatedAt":"2023-07-13T17:52:19.380Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoCancelCurrent":{"id":"lagoCancelCurrent","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"","data":null,"type":"DELETE","error":null,"query":"https://api.getlago.com/api/v1/subscriptions/{{currentPlanExternalId}}","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"json","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-29T17:05:18.607Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:32:05.296Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddSubscription":{"id":"lagoAddSubscription","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  subscription: {\n    external_id: {{uuid.v4()}},\n    external_customer_id: {{searchOperator.data.operator_id[0]}},\n    plan_code: {{planCode}},\n    billing_time: 'anniversary',\n    subscription_at: {{startDate}}\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/subscriptions?","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-30T13:47:50.303Z","namespace":null,"position2":null,"updatedAt":"2023-08-16T18:11:50.951Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddPrepaidCoupon":{"id":"lagoAddPrepaidCoupon","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  \"applied_coupon\": {\n    \"external_customer_id\": {{searchOperator.data.operator_id[0]}},\n    \"coupon_code\": {{couponCode}},\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/applied_coupons","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-08-16T16:15:11.721Z","namespace":null,"position2":null,"updatedAt":"2023-08-16T16:17:41.370Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null}},"version":"3.18.0","appStyles":"","createdAt":null,"isFormApp":false,"shortlink":null,"appThemeId":null,"isFetching":false,"rootScreen":null,"appMaxWidth":"1560px","isMobileApp":false,"appThemeName":null,"testEntities":[],"isGlobalWidget":false,"customShortcuts":[],"mobileAppSettings":{"displaySetting":{"tabletMode":false,"landscapeMode":false},"mobileOfflineModeEnabled":false,"mobileOfflineModeDelaySync":false,"mobileOfflineModeBannerMode":"default"},"customDocumentTitle":"","preloadedAppJSLinks":[],"experimentalFeatures":{"sourceControlTemplateDehydration":false},"markdownLinkBehavior":"auto","multiScreenMobileApp":false,"queryStatusVisibility":false,"instrumentationEnabled":false,"pageLoadValueOverrides":[],"preloadedAppJavaScript":null,"urlFragmentDefinitions":[],"responsiveLayoutDisabled":false,"inAppRetoolPillAppearance":"NO_OVERRIDE","loadingIndicatorsDisabled":false,"customComponentCollections":[],"customDocumentTitleEnabled":false,"experimentalDataTabEnabled":true}}},{"type":"MIGRATIONS_SUCCESS","payload":{"migratedAppTemplate":{"tests":[],"folders":[],"plugins":{"$main":{"id":"$main","type":"frame","uuid":null,"style":{},"folder":"","screen":null,"subtype":"Frame","tabIndex":null,"template":{"type":"main","sticky":null,"paddingType":"normal","isHiddenOnMobile":false,"isHiddenOnDesktop":false},"container":"","createdAt":"2023-06-28T14:19:45.220Z","namespace":null,"position2":null,"updatedAt":"2023-08-16T17:51:29.790Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"State":{"id":"State","type":"function","uuid":null,"style":null,"folder":"","screen":null,"subtype":"Function","tabIndex":null,"template":{"value":"","funcBody":"const PlanCodeNameMap = {\n  // old plans\n  \"marketing-lite-monthly\": \"Marketing Lite (Monthly)\",\n  \"marketing-advanced-monthly\": \"Marketing Advanced (Monthly)\",\n  \"marketing-pro-monthly\": \"Marketing Professional (Monthly)\",\n  \"marketing-enterprise-monthly\": \"Marketing Enterprise (Monthly)\",\n\n  // current plans\n  \"marketing-seo-1-monthly\": \"Marketing SEO Level 1 (Monthly)\",\n  \"marketing-seo-2-monthly\": \"Marketing SEO Level 2 (Monthly)\",\n  \"marketing-seo-3-monthly\": \"Marketing SEO Level 3 (Monthly)\",\n  \"marketing-ppc-monthly\": \"Marketing PPC (Monthly)\",\n};\n\n// data is already filtered to be only marketing plans\nconst data = {{ searchLago.data }} || [];\n\n// seo plan or legacy plan\nconst seoSub = data.find(sub => !sub.plan_code.includes('-ppc-'));\n\n// ppc plan\nconst ppcSub = data.find(sub => sub.plan_code.includes('-ppc-'));\n\nconst state = {\n  // SEO/Legacy plan fields\n  name: \"-\",\n  status: \"-\",\n  startDate: \"-\",\n  currentPlanCode: null,\n  currentPlanId: null,\n\n  canAddPlan: true,\n  canUpgradeDowngradePlan: false,\n  canCancelPlan: false,\n\n  // PPC plan fields\n  ppcName: \"-\",\n  ppcStatus: \"-\",\n  ppcStartDate: \"-\",\n  ppcCurrentPlanCode: null,\n  ppcCurrentPlanId: null,\n\n  canAddPpcPlan: true,\n  canCancelPpcPlan: false\n};\n\nif (seoSub) {\n  state.name = PlanCodeNameMap[seoSub.plan_code];\n  state.status = seoSub.status;\n  state.startDate = new Date(seoSub.subscription_at).toDateString();\n  state.currentPlanCode = seoSub.plan_code;\n  state.currentPlanId = seoSub.external_id;\n\n  \n  state.canAddPlan = false;\n  state.canUpgradeDowngradePlan = seoSub.status === 'active';\n  state.canCancelPlan = seoSub.status === 'active';\n}\n\nif (ppcSub) {\n  state.ppcName = PlanCodeNameMap[ppcSub.plan_code];\n  state.ppcStatus = ppcSub.status;\n  state.ppcStartDate = new Date(ppcSub.subscription_at).toDateString();\n  state.ppcCurrentPlanCode = ppcSub.plan_code;\n  state.ppcCurrentPlanId = ppcSub.external_id;\n  \n  state.canAddPpcPlan = false;\n  state.canCancelPpcPlan = ppcSub.status === 'active';\n}\n\n\nreturn state;"},"container":"","createdAt":"2023-08-10T21:34:30.547Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:33:42.785Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text1":{"id":"text1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"Are you sure you want to update the subscription to {{selectAction.value === 'cancel-subscription' ? 'CANCELLED' : \"'\" + selectPlan.selectedLabel + \"'\"}}?\n\n**They will be billed immediately for any applicable changes**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-30T14:39:30.835Z","namespace":null,"position2":{"col":2,"row":2,"width":8,"height":0.6,"tabNum":0,"rowGroup":"body","container":"modal1","subcontainer":""},"updatedAt":"2023-08-16T19:21:44.167Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text2":{"id":"text2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*Note: setup fee will be charged immediately*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-05T14:41:55.053Z","namespace":null,"position2":{"col":7,"row":9.6,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-05T14:42:09.675Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text3":{"id":"text3","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*defaults to now, do not change unless you want future billing*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-12T18:12:51.555Z","namespace":null,"position2":{"col":10,"row":8.400000000000002,"width":2,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:53:25.049Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text4":{"id":"text4","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"style":{},"value":"Operator:  \n## **{{searchOperator?.data ? searchOperator.data.name : \"-\"}}**\n# **SEO/Legacy Plan**\nPlan:\n## **{{State.value.name}}**\nStatus:\n## **{{State.value.status}}**\nStart Date:\n## **{{State.value.startDate}}**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-10T21:04:36.972Z","namespace":null,"position2":{"col":0,"row":2.8,"width":6,"height":0.6000000000000001,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:20:37.814Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text5":{"id":"text5","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"style":{},"value":" \n# **PPC Plan**\nPlan:\n## **{{State.value.ppcName}}**\nStatus:\n## **{{State.value.ppcStatus}}**\nStart Date:\n## **{{State.value.ppcStartDate}}**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:48:58.563Z","namespace":null,"position2":{"col":0,"row":12.8,"width":6,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:22:05.877Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text6":{"id":"text6","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*defaults to 2 weeks from now*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:52.965Z","namespace":null,"position2":{"col":10,"row":18.799999999999997,"width":2,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:53:38.334Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text7":{"id":"text7","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"Are you sure you want to update the subscription to {{selectAction.value === 'cancel-subscription' ? 'CANCELLED' : \"'\" + selectPlan2.selectedLabel + \"'\"}}?\n\n**They will be billed immediately for any applicable changes**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:54:00.363Z","namespace":null,"position2":{"col":2,"row":2,"width":8,"height":0.6,"tabNum":0,"rowGroup":"body","container":"modal2","subcontainer":""},"updatedAt":"2023-08-16T19:21:27.346Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text8":{"id":"text8","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"*Note: setup fee will be charged immediately*","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T18:22:47.227Z","namespace":null,"position2":{"col":7,"row":20.000000000000004,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:22:47.227Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"text9":{"id":"text9","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextWidget2","tabIndex":null,"template":{"value":"**____________________________________________________________________________________________________________________________________________________________________________________________________________**","hidden":false,"heightType":"auto","imageWidth":"fit","marginType":"normal","tooltipText":"","overflowType":"scroll","showInEditor":false,"verticalAlign":"center","disableMarkdown":false,"horizontalAlign":"left","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T18:25:20.372Z","namespace":null,"position2":{"col":0,"row":12.200000000000001,"width":11,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:27:08.390Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"modal1":{"id":"modal1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ModalWidget","tabIndex":null,"template":{"events":[],"opened":false,"loading":"","disabled":"","buttonText":"Update SEO/Legacy Subscription","modalWidth":"","modalHeight":"","onModalOpen":"","tooltipText":"","onModalClose":"","modalHeightType":"fixed","modalOverflowType":"scroll","closeOnOutsideClick":true},"container":"","createdAt":"2023-06-30T14:38:58.154Z","namespace":null,"position2":{"col":7,"row":11.199999999999998,"width":3,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:50:51.059Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"modal2":{"id":"modal2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ModalWidget","tabIndex":null,"template":{"events":[],"opened":false,"loading":"","disabled":"","buttonText":"Update PPC Subscription","modalWidth":"","modalHeight":"","onModalOpen":"","tooltipText":"","onModalClose":"","modalHeightType":"fixed","modalOverflowType":"scroll","closeOnOutsideClick":true},"container":"","createdAt":"2023-08-16T17:54:00.348Z","namespace":null,"position2":{"col":7,"row":21.6,"width":3,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T17:54:08.393Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button1":{"id":"button1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Search","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"0","pluginId":"searchOperator","targetId":null,"waitType":"debounce"}],"hidden":false,"submit":false,"loading":false,"disabled":"{{!textInput2.value}}","clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":"","horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:21:01.473Z","namespace":null,"position2":{"col":4,"row":1.4,"width":2,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T13:51:34.883Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button3":{"id":"button3","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Update","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"1000","pluginId":"runSEOUpdate","targetId":null,"waitType":"throttle"}],"hidden":false,"submit":false,"loading":false,"disabled":false,"clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":null,"horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-30T14:39:23.492Z","namespace":null,"position2":{"col":2,"row":7.4,"width":8,"height":1,"tabNum":0,"rowGroup":"body","container":"modal1","subcontainer":""},"updatedAt":"2023-08-16T17:59:21.556Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"button4":{"id":"button4","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"ButtonWidget2","tabIndex":null,"template":{"text":"Update","events":[{"type":"datasource","event":"click","method":"trigger","params":{},"waitMs":"1000","pluginId":"runPPCUpdate","targetId":null,"waitType":"throttle"}],"hidden":false,"submit":false,"loading":false,"disabled":false,"clickable":false,"iconAfter":"","iconBefore":"","marginType":"normal","tooltipText":"","showInEditor":false,"styleVariant":"solid","loaderPosition":"auto","submitTargetId":null,"horizontalAlign":"stretch","maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:54:00.354Z","namespace":null,"position2":{"col":2,"row":7.4,"width":8,"height":1,"tabNum":0,"rowGroup":"body","container":"modal2","subcontainer":""},"updatedAt":"2023-08-16T18:05:26.839Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"spacer1":{"id":"spacer1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SpacerWidget","tabIndex":null,"template":{"hidden":false,"marginType":"normal","showInEditor":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T18:24:24.924Z","namespace":null,"position2":{"col":0,"row":13.4,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:24:24.924Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"checkbox1":{"id":"checkbox1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"CheckboxWidget2","tabIndex":null,"template":{"label":"Include Setup fee","value":"true","events":{},"hidden":false,"invalid":false,"disabled":"{{selectAction.value !== 'add'}}","required":false,"_validate":false,"labelWrap":false,"labelAlign":"left","marginType":"normal","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"right","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-03T18:59:05.671Z","namespace":null,"position2":{"col":7,"row":5.8,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T19:14:45.349Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"checkbox2":{"id":"checkbox2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"CheckboxWidget2","tabIndex":null,"template":{"label":"Include Setup fee","value":"true","events":{},"hidden":false,"invalid":false,"disabled":"{{selectAction2.value !== 'add'}}","required":false,"_validate":false,"labelWrap":false,"labelAlign":"left","marginType":"normal","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"right","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:26.322Z","namespace":null,"position2":{"col":7,"row":17.8,"width":3,"height":0.6,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:35:01.359Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"dateTime1":{"id":"dateTime1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"DateTimeWidget","tabIndex":null,"template":{"label":"Start Billing On","value":"{{ new Date().toISOString()}}","events":{},"hidden":false,"invalid":false,"loading":false,"maxDate":"","maxTime":"","minDate":"","minTime":"","disabled":"{{!selectAction.value || selectAction.value === 'cancel-subscription'}}","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","dateFormat":"MMM d, yyyy","iconBefore":"bold/interface-calendar","labelAlign":"left","labelWidth":"33","marginType":"normal","minuteStep":15,"textBefore":"","timeFormat":"","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"left","valueTimeZone":"00:00","firstDayOfWeek":0,"formattedValue":"","labelWidthUnit":"%","manageTimeZone":false,"datePlaceholder":"{{ self.dateFormat.toUpperCase() }}","displayTimeZone":"local","timePlaceholder":"","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-07-12T18:11:03.532Z","namespace":null,"position2":{"col":6,"row":8.6,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:03:04.440Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"dateTime2":{"id":"dateTime2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"DateTimeWidget","tabIndex":null,"template":{"label":"Start Billing On","value":"{{ (function() { const a = new Date();  a.setDate(a.getDate() + 14); return a.toISOString();})()}}","events":{},"hidden":false,"invalid":false,"loading":false,"maxDate":"","maxTime":"","minDate":"","minTime":"","disabled":"{{selectAction2.value !== 'add'}}","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","dateFormat":"MMM d, yyyy","iconBefore":"bold/interface-calendar","labelAlign":"left","labelWidth":"33","marginType":"normal","minuteStep":15,"textBefore":"","timeFormat":"","formDataKey":"{{ self.id }}","tooltipText":"","labelCaption":"","showInEditor":false,"labelPosition":"left","valueTimeZone":"00:00","firstDayOfWeek":0,"formattedValue":"","labelWidthUnit":"%","manageTimeZone":false,"datePlaceholder":"{{ self.dateFormat.toUpperCase() }}","displayTimeZone":"local","timePlaceholder":"","customValidation":"","validationMessage":"","hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:37.116Z","namespace":null,"position2":{"col":6,"row":19,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:02:20.696Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"searchLago":{"id":"searchLago","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"","data":null,"type":"GET","error":null,"query":"https://api.getlago.com/api/v1/subscriptions?external_customer_id={{textInput2.value}}&status[]=pending&status[]=active","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"none","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data.subscriptions.filter(sub => sub.plan_code.startsWith('marketing'))","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":true,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-07-03T13:43:10.949Z","namespace":null,"position2":null,"updatedAt":"2023-08-10T20:44:06.674Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectPlan":{"id":"selectPlan","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","a19f6","6b3de"],"data":[],"label":"New Plan","value":null,"events":[],"hidden":false,"labels":[],"values":[],"_labels":["Marketing SEO Level 1","Marketing SEO Level 2","Marketing SEO Level 3"],"_values":["marketing-seo-1-monthly","marketing-seo-2-monthly","marketing-seo-3-monthly"],"invalid":false,"loading":false,"disabled":"{{!['add', 'upgrade-downgrade'].includes(selectAction.value)}}","itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["","",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["","",""],"_imageByIndex":["","",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["","",false],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["","",false],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["","",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:47:31.935Z","namespace":null,"position2":{"col":6,"row":4.6000000000000005,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:05:41.247Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"textInput2":{"id":"textInput2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"TextInputWidget2","tabIndex":null,"template":{"label":"","value":"","events":{},"hidden":false,"invalid":false,"loading":false,"pattern":"","autoFill":"","disabled":false,"readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"maxLength":null,"minLength":null,"showClear":false,"textAfter":"","iconBefore":"","labelAlign":"left","labelWidth":"33","marginType":"normal","spellCheck":false,"textBefore":"","formDataKey":"{{ self.id }}","patternType":"","placeholder":"Operator ID","tooltipText":"","autoComplete":false,"inputTooltip":"","labelCaption":"","showInEditor":false,"labelPosition":"left","autoCapitalize":"none","labelWidthUnit":"%","customValidation":"","validationMessage":"","showCharacterCount":false,"hideValidationMessage":false,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:28:31.412Z","namespace":null,"position2":{"col":0,"row":1.4,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-10T21:27:21.482Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"navigation1":{"id":"navigation1","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"NavigationWidget2","tabIndex":null,"template":{"src":"","_ids":["71376","763bd","dcfec"],"data":[],"events":{},"hidden":false,"labels":[],"_labels":["New Customer","Upgrade/Downgrade/Cancel","Marketing Subscriptions"],"altText":"","srcType":"src","dbBlobId":"","disabled":false,"itemMode":"static","srcWidth":null,"srcHeight":null,"heightType":"auto","keyByIndex":[],"marginType":"normal","_keyByIndex":["","",""],"iconByIndex":[],"orientation":"horizontal","tooltipText":"","_iconByIndex":["","",""],"overflowMode":"scroll","showInEditor":false,"hiddenByIndex":[],"storageBlobId":"","_hiddenByIndex":["","",""],"captionByIndex":[],"tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"itemTypeByIndex":[],"_disabledByIndex":["","",""],"_itemTypeByIndex":["app","app","app"],"appTargetByIndex":[],"highlightByIndex":[],"parentKeyByIndex":[],"retoolFileObject":{},"_appTargetByIndex":["915c0950-175c-11ee-a803-9bd7604e06b4","75490906-15be-11ee-9032-9b5e394cb9a1","e6eebc72-19a6-11ee-a562-27f921366ca5"],"_highlightByIndex":["","",""],"_parentKeyByIndex":["","",""],"horizontalAlignment":"left","iconPositionByIndex":[],"retoolStorageFileId":"","_iconPositionByIndex":["","",""],"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false,"retoolStorageDynamicInput":false,"retoolStorageShowLegacyFiles":false,"_automaticallyHighlightedIndices":[]},"container":"","createdAt":"2023-06-30T18:59:27.610Z","namespace":null,"position2":{"col":0,"row":0.6,"width":8,"height":0.8,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-07-03T13:39:11.583Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectPlan2":{"id":"selectPlan2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["0fd1b"],"data":[],"label":"New Plan","value":null,"events":[],"hidden":false,"labels":[],"values":[],"_labels":["Marketing PPC"],"_values":["marketing-ppc-monthly"],"invalid":false,"loading":false,"disabled":"{{!['add'].includes(selectAction2.value)}}","itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":[""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":[""],"_imageByIndex":[""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":[false],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":[""],"_tooltipByIndex":[""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":[false],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":[""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:52:11.890Z","namespace":null,"position2":{"col":6,"row":16.599999999999998,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:01:26.602Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"runPPCUpdate":{"id":"runPPCUpdate","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"JavascriptQuery","tabIndex":null,"template":{"data":null,"error":null,"query":"function reset() {\n  searchOperator.reset();\n  modal1.close();\n  selectAction.resetValue();\n  selectPlan.resetValue();\n  textInput2.resetValue();\n  checkbox1.resetValue();\n  dateTime1.resetValue();\n\n  modal2.close();\n  selectAction2.resetValue();\n  selectPlan2.resetValue();\n  textInput2.resetValue();\n  checkbox2.resetValue();\n  dateTime2.resetValue();\n}\n\nfunction getAddOnCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-ppc-monthly') {\n    return 'marketing-ppc-setup-fee';\n  }\n  return null;\n}\n\n\nfunction runQuery() {\n  const newPlan = selectPlan2.value;\n  const applySetupFee = checkbox2.value;\n  const startDate = dateTime2.value.slice(0,-5) + 'Z';\n  const action = selectAction2.value;\n  \n  // ADD\n  if (action === 'add' && newPlan) {\n      lagoAddSubscription.trigger({\n            additionalScope: {\n              planCode: newPlan,\n              startDate: startDate,\n            },\n            onSuccess: function() {\n              const addOnCode = getAddOnCode(newPlan, applySetupFee);\n              if (addOnCode) {\n                lagoAddSetupFee.trigger({\n                  additionalScope: {\n                    addOnCode: addOnCode\n                  },\n                  onSuccess: reset\n                });\n              } else {\n                reset();\n              }\n            },\n        });\n    return;\n  }\n\n\n  // CANCEL SUBSCRIPTION\n  if (action === 'cancel-subscription') {\n    lagoCancelCurrent.trigger({\n      onSuccess: reset,\n      additionalScope: {\n        currentPlanExternalId: State.value.ppcCurrentPlanId\n      }\n    });\n   return;\n  }\n\n  throw new Error('missing data, please fill out required forms');\n}\n\nrunQuery();","events":[],"rawData":null,"finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"_additionalScope":[],"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":null,"importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-08-16T17:59:24.506Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:33:58.994Z","resourceName":"JavascriptQuery","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"runSEOUpdate":{"id":"runSEOUpdate","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"JavascriptQuery","tabIndex":null,"template":{"data":null,"error":null,"query":"function reset() {\n  searchOperator.reset();\n  modal1.close();\n  selectAction.resetValue();\n  selectPlan.resetValue();\n  textInput2.resetValue();\n  checkbox1.resetValue();\n  dateTime1.resetValue();\n\n  modal2.close();\n  selectAction2.resetValue();\n  selectPlan2.resetValue();\n  textInput2.resetValue();\n  checkbox2.resetValue();\n  dateTime2.resetValue();\n}\n\nfunction getAddOnCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-seo-1-monthly') {\n    return 'marketing-seo-1-setup-fee';\n  }\n  if (lagoPlan === 'marketing-seo-2-monthly') {\n    return 'marketing-seo-2-setup-fee';\n  }\n  if (lagoPlan === 'marketing-seo-3-monthly') {\n    return 'marketing-seo-3-setup-fee';\n  }\n  return null;\n}\n\nfunction getCouponCode(lagoPlan, isChecked) {\n  if (!isChecked) {\n    return null;\n  }\n  if (lagoPlan === 'marketing-seo-1-monthly') {\n    return 'marketing-seo-1-prepaid';\n  }\n  if (lagoPlan === 'marketing-seo-2-monthly') {\n    return 'marketing-seo-2-prepaid';\n  }\n  if (lagoPlan === 'marketing-seo-3-monthly') {\n    return 'marketing-seo-3-prepaid';\n  }\n  return null;\n}\n\n\nfunction runQuery() {\n  const newPlan = selectPlan.value;\n  const applySetupFee = checkbox1.value;\n  const startDate = dateTime1.value.slice(0,-5) + 'Z';\n  const action = selectAction.value;\n  \n  // ADD\n  if (action === 'add' && newPlan) {\n      lagoAddSubscription.trigger({\n            additionalScope: {\n              planCode: newPlan,\n              startDate: startDate\n            },\n            onSuccess: function() {\n              const addOnCode = getAddOnCode(newPlan, applySetupFee);\n              if (addOnCode) {\n                lagoAddSetupFee.trigger({\n                  additionalScope: {\n                    addOnCode: addOnCode\n                  },\n                  onSuccess: function() {\n                    const couponCode = getCouponCode(newPlan, applySetupFee);\n                    if (couponCode) {\n                      lagoAddPrepaidCoupon.trigger({\n                        additionalScope: {\n                          couponCode: couponCode\n                        },\n                        onSuccess: reset\n                      });\n                    } else {\n                      reset();\n                    }\n                  },\n                })\n              } else {\n                reset();\n              }\n            },\n        });\n    return;\n  }\n\n// UPGRADE/DOWNGRADE\n  if (action === 'upgrade-downgrade' && selectPlan.value) {\n      lagoCancelCurrent.trigger({\n        onSuccess: function() {\n          lagoAddSubscription.trigger({\n            onSuccess: reset,\n          });\n        }\n      });\n    return;\n}\n  \n\n\n  // CANCEL SUBSCRIPTION\n  if (action === 'cancel-subscription') {\n    lagoCancelCurrent.trigger({\n      onSuccess: reset,\n      additionalScope: {\n        currentPlanExternalId: State.value.currentPlanId\n      }\n    });\n   return;\n  }\n\n  throw new Error('missing data, please fill out required forms');\n}\n\nrunQuery();","events":[],"rawData":null,"finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"_additionalScope":[],"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":null,"importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-30T13:59:08.526Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:32:23.940Z","resourceName":"JavascriptQuery","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectAction":{"id":"selectAction","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","ba8f1","a19f6"],"data":[],"label":"Action","value":null,"events":{},"hidden":false,"labels":[],"values":[],"_labels":["Add a new marketing plan","Upgrade/Downgrade plan","Cancel marketing plan"],"_values":["add","upgrade-downgrade","cancel-subscription"],"invalid":false,"loading":false,"disabled":false,"itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["","",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["","",""],"_imageByIndex":["","",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["",false,""],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["","",""],"_tooltipByIndex":["","",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["{{!State.value.canAddPlan}}","{{!State.value.canUpgradeDowngradePlan}}","{{!State.value.canCancelPlan}}"],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["","",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-06-28T14:38:29.340Z","namespace":null,"position2":{"col":6,"row":2.6000000000000005,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-10T22:21:13.273Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"selectAction2":{"id":"selectAction2","type":"widget","uuid":null,"style":{},"folder":"","screen":null,"subtype":"SelectWidget2","tabIndex":null,"template":{"_ids":["2c0f9","a19f6"],"data":[],"label":"Action","value":null,"events":{},"hidden":false,"labels":[],"values":[],"_labels":["Add a new marketing plan","Cancel marketing plan"],"_values":["add","cancel-subscription"],"invalid":false,"loading":false,"disabled":false,"itemMode":"static","readOnly":false,"required":false,"_validate":false,"iconAfter":"","labelWrap":false,"showClear":false,"textAfter":"","iconBefore":"","inputValue":"","labelAlign":"left","labelWidth":"33","marginType":"normal","searchMode":"fuzzy","textBefore":"","formDataKey":"{{ self.id }}","iconByIndex":[],"placeholder":"Select an option","tooltipText":"","_iconByIndex":["",""],"colorByIndex":[],"emptyMessage":"No options","imageByIndex":[],"labelCaption":"","selectedItem":null,"showInEditor":false,"_colorByIndex":["",""],"_imageByIndex":["",""],"allowDeselect":false,"hiddenByIndex":[],"labelPosition":"left","selectedIndex":null,"selectedLabel":"","_hiddenByIndex":["",""],"captionByIndex":[],"disabledValues":[],"labelWidthUnit":"%","tooltipByIndex":[],"_captionByIndex":["",""],"_tooltipByIndex":["",""],"disabledByIndex":[],"overlayMinWidth":null,"_disabledByIndex":["{{!State.value.canAddPpcPlan}}","{{!State.value.canCancelPpcPlan}}"],"allowCustomValue":false,"customValidation":"","deprecatedLabels":[],"overlayMaxHeight":375,"itemAdornmentSize":"auto","validationMessage":"","itemAdornmentShape":"circle","automaticItemColors":false,"fallbackTextByIndex":[],"_fallbackTextByIndex":["",""],"hideValidationMessage":false,"showSelectionIndicator":true,"_hasMigratedNestedItems":true,"maintainSpaceWhenHidden":false},"container":"","createdAt":"2023-08-16T17:51:49.114Z","namespace":null,"position2":{"col":6,"row":12.8,"width":4,"height":1,"tabNum":0,"rowGroup":"body","container":"","subcontainer":""},"updatedAt":"2023-08-16T18:00:35.616Z","resourceName":null,"mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"searchOperator":{"id":"searchOperator","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"SqlQueryUnified","tabIndex":null,"template":{"data":null,"error":null,"query":"select * from operator\njoin subscription_log using(operator_id)\nwhere operator_id = {{textInput2.value}}\n  and subscription_log.removed_at is null","events":[{"type":"script","event":"success","method":"run","params":{"src":"if (searchOperator.data.operator_id.length > 0) {\n  searchLago.trigger();\n} else {\n  throw new Error('Operator not found!')\n}"},"waitMs":"1000","pluginId":"","targetId":null,"waitType":"throttle"}],"rawData":null,"records":"","filterBy":"","finished":null,"metadata":null,"recordId":"","changeset":"","dataArray":[],"tableName":"","timestamp":0,"actionType":"","editorMode":"sql","isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","warningCodes":[],"allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","servedFromCache":false,"doNotThrowOnNoOp":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableBulkUpdates":false,"enableTransformer":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","shouldUseLegacySql":false,"showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","bulkUpdatePrimaryKey":"","databaseHostOverride":"","databaseNameOverride":"","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","databasePasswordOverride":"","databaseUsernameOverride":"","shouldEnableBatchQuerying":false,"updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-28T14:17:05.070Z","namespace":null,"position2":null,"updatedAt":"2023-07-03T13:55:39.431Z","resourceName":"7744c302-1341-493f-9fa4-71b6dd5c5923","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddSetupFee":{"id":"lagoAddSetupFee","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  \"invoice\": {\n    \"external_customer_id\": {{searchOperator.data.operator_id[0]}},\n    \"currency\": \"USD\",\n    \"fees\": [\n      {\n        \"add_on_code\": {{addOnCode}},\n      }\n    ]\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/invoices","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-07-03T18:55:02.275Z","namespace":null,"position2":null,"updatedAt":"2023-07-13T17:52:19.380Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoCancelCurrent":{"id":"lagoCancelCurrent","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"","data":null,"type":"DELETE","error":null,"query":"https://api.getlago.com/api/v1/subscriptions/{{currentPlanExternalId}}","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"json","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-29T17:05:18.607Z","namespace":null,"position2":null,"updatedAt":"2023-10-12T19:32:05.296Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddSubscription":{"id":"lagoAddSubscription","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  subscription: {\n    external_id: {{uuid.v4()}},\n    external_customer_id: {{searchOperator.data.operator_id[0]}},\n    plan_code: {{planCode}},\n    billing_time: 'anniversary',\n    subscription_at: {{startDate}}\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/subscriptions?","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"isMultiplayerEdited":false,"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-06-30T13:47:50.303Z","namespace":null,"position2":null,"updatedAt":"2023-08-16T18:11:50.951Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null},"lagoAddPrepaidCoupon":{"id":"lagoAddPrepaidCoupon","type":"datasource","uuid":null,"style":null,"folder":"","screen":null,"subtype":"RESTQuery","tabIndex":null,"template":{"body":"{\n  \"applied_coupon\": {\n    \"external_customer_id\": {{searchOperator.data.operator_id[0]}},\n    \"coupon_code\": {{couponCode}},\n  }\n}","data":null,"type":"POST","error":null,"query":"https://api.getlago.com/api/v1/applied_coupons","events":[],"cookies":"","headers":"[{\"key\":\"\",\"value\":\"\"},{\"key\":\"Authorization\",\"value\":\"Bearer dbc5315d-b250-4f6d-94e3-1c77df496a1d\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}]","rawData":null,"version":2,"bodyType":"raw","finished":null,"metadata":null,"changeset":"","timestamp":0,"isFetching":false,"isImported":false,"workflowId":null,"cacheKeyTtl":"","transformer":"// type your code here\n// example: return formatDataAsArray(data).filter(row => row.quantity > 20)\nreturn data","queryRunTime":null,"queryTimeout":"10000","allowedGroups":[],"enableCaching":false,"privateParams":[],"queryDisabled":"","watchedParams":[],"workflowRunId":null,"streamResponse":false,"successMessage":"","workflowParams":null,"changesetObject":"","paginationLimit":"","servedFromCache":false,"errorTransformer":"// The variable 'data' allows you to reference the request's data in the transformer. \n// example: return data.find(element => element.isError)\nreturn data.error","offlineQueryType":"None","queryRefreshTime":"","runWhenPageLoads":false,"changesetIsObject":false,"enableTransformer":false,"paginationEnabled":false,"playgroundQueryId":null,"queryThrottleTime":"750","queryTriggerDelay":"0","showFailureToaster":true,"showSuccessToaster":true,"workflowActionType":null,"confirmationMessage":null,"importedQueryInputs":{},"paginationDataField":"","playgroundQueryUuid":"","requireConfirmation":false,"runWhenModelUpdates":false,"workflowRunBodyType":"raw","notificationDuration":"","queryDisabledMessage":"","requestSentTimestamp":null,"resourceNameOverride":"","resourceTypeOverride":"","importedQueryDefaults":{},"playgroundQuerySaveId":"latest","runWhenPageLoadsDelay":"","workflowBlockPluginId":null,"enableErrorTransformer":false,"offlineUserQueryInputs":"","queryFailureConditions":"","paginationPaginationField":"","updateSetValueDynamically":false,"lastReceivedFromResourceAt":null,"overrideOrgCacheForUserCache":false,"showLatestVersionUpdatedWarning":false,"showUpdateSetValueDynamicallyToggle":true},"container":"","createdAt":"2023-08-16T16:15:11.721Z","namespace":null,"position2":null,"updatedAt":"2023-08-16T16:17:41.370Z","resourceName":"REST-WithoutResource","mobilePosition2":null,"mobileAppPosition":null,"resourceDisplayName":null}},"version":"3.18.0","appStyles":"","createdAt":null,"isFormApp":false,"shortlink":null,"appThemeId":null,"isFetching":false,"rootScreen":null,"appMaxWidth":"1560px","isMobileApp":false,"appThemeName":null,"testEntities":[],"isGlobalWidget":false,"customShortcuts":[],"mobileAppSettings":{"displaySetting":{"tabletMode":false,"landscapeMode":false},"mobileOfflineModeEnabled":false,"mobileOfflineModeDelaySync":false,"mobileOfflineModeBannerMode":"default"},"customDocumentTitle":"","preloadedAppJSLinks":[],"experimentalFeatures":{"sourceControlTemplateDehydration":false},"markdownLinkBehavior":"auto","multiScreenMobileApp":false,"queryStatusVisibility":false,"instrumentationEnabled":false,"pageLoadValueOverrides":[],"preloadedAppJavaScript":null,"urlFragmentDefinitions":[],"responsiveLayoutDisabled":false,"inAppRetoolPillAppearance":"NO_OVERRIDE","loadingIndicatorsDisabled":false,"customComponentCollections":[],"customDocumentTitleEnabled":false,"experimentalDataTabEnabled":true}}}],"changesRecordV2":null,"checksum":null,"multiplayerSessionId":null,"appTestingSaveId":null,"subflows":null,"isCopilotGenerated":null,"createdAt":"2023-10-27T23:53:19.773Z","updatedAt":"2026-01-27T17:34:10.453Z","pageId":2304057,"userId":264859},"modules":{}}